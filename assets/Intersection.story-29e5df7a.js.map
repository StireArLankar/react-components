{"version":3,"file":"Intersection.story-29e5df7a.js","sources":["../../src/hook/useIntersectionObserver.ts","../../src/components/native/Intersection/ListItem.tsx","../../src/components/native/Intersection/index.tsx","../../src/components/native/Intersection/Intersection.story.tsx"],"sourcesContent":["import { useState, useRef, useEffect } from 'react'\r\n\r\nexport const useIntersectionObserver = <T>(): [\r\n  boolean,\r\n  React.MutableRefObject<T>\r\n] => {\r\n  const [isIntersecting, setisIntersecting] = useState(false)\r\n  const ref = useRef<T>(null as any)\r\n\r\n  useEffect(() => {\r\n    const cb = (entries: IntersectionObserverEntry[]) => {\r\n      entries.forEach((entry) => {\r\n        setisIntersecting(entry.isIntersecting)\r\n      })\r\n    }\r\n\r\n    const observer = new IntersectionObserver(cb, {\r\n      root: null,\r\n      rootMargin: '0px',\r\n      threshold: 0.1,\r\n    })\r\n\r\n    ref.current && observer.observe(ref.current as any)\r\n\r\n    return () => observer.disconnect()\r\n  }, [])\r\n\r\n  return [isIntersecting, ref]\r\n}\r\n\r\nexport default useIntersectionObserver\r\n","import React from 'react'\r\n\r\nimport clsx from 'clsx'\r\n\r\nimport useIntersectionObserver from '~/hook/useIntersectionObserver'\r\n\r\nimport style from './intersection.module.scss'\r\n\r\nexport interface ListItemProps {\r\n  url: string\r\n}\r\n\r\nexport const ListItem = (props: ListItemProps) => {\r\n  const [isIntersecting, ref] = useIntersectionObserver<HTMLLIElement>()\r\n\r\n  const className = clsx({\r\n    [style.imgWrapper]: true,\r\n    [style.enter]: isIntersecting,\r\n    [style.leave]: !isIntersecting,\r\n  })\r\n\r\n  return (\r\n    <li className={className} ref={ref}>\r\n      <img src={props.url} className={style.img} alt='Some alt text' />\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default ListItem\r\n","import React from 'react'\r\n\r\nimport clsx from 'clsx'\r\n\r\nimport useBGColor from '~/hook/useBgColor'\r\n\r\nimport classes from './intersection.module.scss'\r\nimport ListItem from './ListItem'\r\n\r\nconst getUrl = (index: number) =>\r\n  `https://stirearlankar.github.io/54729-kekstagram/photos/${index + 8}.jpg`\r\n\r\nexport const Intersection = () => {\r\n  useBGColor(197, 241, 246)\r\n\r\n  const renderItems = () =>\r\n    new Array(10)\r\n      .fill(1)\r\n      .map((_, index) => <ListItem url={getUrl(index)} key={index} />)\r\n\r\n  const listClass = clsx({\r\n    [classes.list]: true,\r\n    'custom-scroll': true,\r\n  })\r\n\r\n  return (\r\n    <div className={classes.wrapper}>\r\n      <ul className={listClass}>{renderItems()}</ul>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Intersection\r\n","import { withCenteredStyle } from '~/_storybook/withCenteredStyle';\nimport { withCustomTheme } from '~/_storybook/withCustomTheme';\nimport { Intersection } from '.';\nexport default {\n  title: 'Native/Intersection',\n  decorators: [withCenteredStyle({\n    width: '100%',\n    padding: 20\n  }), withCustomTheme]\n};\nexport const Example = () => <Intersection />;\nExample.parameters = {\n  ...Example.parameters,\n  storySource: {\n    source: \"() => <Intersection />\",\n    ...Example.parameters?.storySource\n  }\n};"],"names":["useIntersectionObserver","isIntersecting","setisIntersecting","useState","ref","useRef","useEffect","cb","entries","entry","observer","ListItem","props","className","clsx","style","jsx","getUrl","index","Intersection","useBGColor","renderItems","_","listClass","classes","Intersection_story","withCenteredStyle","withCustomTheme","Example","_a"],"mappings":"kkBAEaA,EAA0B,IAGlC,CACH,KAAM,CAACC,EAAgBC,CAAiB,EAAIC,WAAS,EAAK,EACpDC,EAAMC,SAAU,IAAW,EAEjCC,OAAAA,EAAAA,UAAU,IAAM,CACR,MAAAC,EAAMC,GAAyC,CAC3CA,EAAA,QAASC,GAAU,CACzBP,EAAkBO,EAAM,cAAc,CAAA,CACvC,CAAA,EAGGC,EAAW,IAAI,qBAAqBH,EAAI,CAC5C,KAAM,KACN,WAAY,MACZ,UAAW,EAAA,CACZ,EAED,OAAAH,EAAI,SAAWM,EAAS,QAAQN,EAAI,OAAc,EAE3C,IAAMM,EAAS,YACxB,EAAG,CAAE,CAAA,EAEE,CAACT,EAAgBG,CAAG,CAC7B,EChBOO,EAAAC,GAAA,CACL,KAAA,CAAAX,EAAAG,CAAA,EAAAJ,EAAA,EAEAa,EAAAC,EAAA,CAAuB,CAAAC,EAAA,UAAA,EAAA,GACD,CAAAA,EAAA,KAAA,EAAAd,EACL,CAAAc,EAAA,KAAA,EAAA,CAAAd,CACC,CAAA,EAGlB,OAAAe,EAAA,IAAA,KAAA,CAAA,UAAAH,EAAA,IAAAT,EAAA,SAAAY,EAAAA,IAAA,MAAA,CAAA,IAAAJ,EAAA,IAAA,UAAAG,EAAA,IAAA,IAAA,eAAA,CAAA,CAAA,CAAA,CAKF,wLCjBA,MAAME,EAAUC,GACd,2DAA2DA,EAAQ,QAExDC,EAAe,IAAM,CACrBC,EAAA,IAAK,IAAK,GAAG,EAElB,MAAAC,EAAc,IAClB,IAAI,MAAM,EAAE,EACT,KAAK,CAAC,EACN,IAAI,CAACC,EAAGJ,UAAWP,EAAS,CAAA,IAAKM,EAAOC,CAAK,CAAA,EAAQA,CAAO,CAAE,EAE7DK,EAAYT,EAAK,CACrB,CAACU,EAAQ,IAAI,EAAG,GAChB,gBAAiB,EAAA,CAClB,EAGC,OAAAR,EAAAA,IAAC,MAAI,CAAA,UAAWQ,EAAQ,QACtB,SAACR,EAAAA,IAAA,KAAA,CAAG,UAAWO,EAAY,SAAYF,EAAA,CAAA,CAAE,CAC3C,CAAA,CAEJ,EC3BeI,EAAA,CACb,MAAO,sBACP,WAAY,CAACC,EAAkB,CAC7B,MAAO,OACP,QAAS,EACV,CAAA,EAAGC,CAAe,CACrB,EACaC,EAAU,IAAMZ,EAAAA,IAACG,EAAa,EAAA,QAC3CS,EAAQ,WAAa,CACnB,GAAGA,EAAQ,WACX,YAAa,CACX,OAAQ,yBACR,IAAGC,EAAAD,EAAQ,aAAR,YAAAC,EAAoB,WACzB,CACF"}