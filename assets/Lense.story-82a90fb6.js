import{j as e,w as $}from"./withCustomTheme-ab58be2d.js";import{w as T}from"./withCenteredStyle-93f62c3f.js";import{r as m}from"./index-f1f749bf.js";import{u as k}from"./useBgColor-6afa340b.js";import"./story.css-e50b5b1c.js";import"./_commonjsHelpers-042e6b4d.js";const H="_container_1hbds_1",W="_wrapper_1hbds_5",E="_controls_1hbds_14",M="_label_1hbds_21",D="_labelText_1hbds_26",R="_handler_1hbds_30",X="_handlerImg_1hbds_37",Y="_border_1hbds_46",B="_lense_1hbds_54",F="_view_1hbds_62",G="_viewWrapper_1hbds_70",U="_viewImg_1hbds_76",s={container:H,wrapper:W,controls:E,label:M,labelText:D,handler:R,handlerImg:X,border:Y,lense:B,view:F,viewWrapper:G,viewImg:U},b=n=>{const r=m.useRef(null),i=l=>{l.preventDefault();const d=r.current;if(!d)return;const{x:p,y:h}=d.getBoundingClientRect(),{clientHeight:N,clientWidth:C}=d,V=C-n.lenseSize,q=N-n.lenseSize,f=u=>(u.clientX-p-n.lenseSize/2)/V,S=u=>(u.clientY-h-n.lenseSize/2)/q;let _=f(l),x=S(l);const z=u=>{_=f(u),x=S(u);const I=_>=0?_<=1?_:1:0,L=x>=0?x<=1?x:1:0;n.changeCoords(I,L)},w=()=>{document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",w)};document.addEventListener("mousemove",z),document.addEventListener("mouseup",w)},{url:o,x:t,y:a}=n,c={top:`${a*100}%`,left:`${t*100}%`};return e.jsxs("div",{className:s.handler,onMouseDown:i,ref:r,children:[e.jsx("img",{src:o,alt:"",className:s.handlerImg}),e.jsx("div",{className:s.border,children:e.jsx("div",{className:s.lense,style:c})})]})};try{b.displayName="Handler",b.__docgenInfo={description:"",displayName:"Handler",props:{x:{defaultValue:null,description:"",name:"x",required:!0,type:{name:"number"}},y:{defaultValue:null,description:"",name:"y",required:!0,type:{name:"number"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},lenseSize:{defaultValue:null,description:"",name:"lenseSize",required:!0,type:{name:"number"}},changeCoords:{defaultValue:null,description:"",name:"changeCoords",required:!0,type:{name:"(x: number, y: number) => void"}}}}}catch{}const g=n=>{const{x:r,y:i,url:o,size:t,lenseSize:a}=n,c=t*t/a-t,l={transform:`translate(-${r*c}px, -${i*c}px)`,width:`${t*t/a}px`,height:`${t*t/a}px`};return e.jsx("div",{className:s.view,children:e.jsx("div",{className:s.viewWrapper,style:l,children:e.jsx("img",{src:o,alt:"",className:s.viewImg})})})};try{g.displayName="View",g.__docgenInfo={description:"",displayName:"View",props:{size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:"number"}},lenseSize:{defaultValue:null,description:"",name:"lenseSize",required:!0,type:{name:"number"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}},x:{defaultValue:null,description:"",name:"x",required:!0,type:{name:"number"}},y:{defaultValue:null,description:"",name:"y",required:!0,type:{name:"number"}}}}}catch{}const v=n=>{const[r,i]=m.useState({x:0,y:0}),{size:o,lenseSize:t,url:a}=n,c=(d,p)=>i({x:d,y:p}),l={["--size"]:`${o}px`,["--lense-size"]:`${t}px`};return e.jsxs("div",{className:s.wrapper,style:l,children:[e.jsx(b,{changeCoords:c,x:r.x,y:r.y,url:a,lenseSize:t}),e.jsx(g,{x:r.x,y:r.y,url:a,size:o,lenseSize:t})]})};try{v.displayName="Controller",v.__docgenInfo={description:"",displayName:"Controller",props:{size:{defaultValue:null,description:"",name:"size",required:!0,type:{name:"number"}},lenseSize:{defaultValue:null,description:"",name:"lenseSize",required:!0,type:{name:"number"}},url:{defaultValue:null,description:"",name:"url",required:!0,type:{name:"string"}}}}}catch{}const A=()=>{const[n,r]=m.useState(200),[i,o]=m.useState(50),[t]=m.useState("https://stirearlankar.github.io/54729-kekstagram/photos/14.jpg");k(197,241,246);const a=d=>p=>{const h=+p.target.value;isNaN(h)||d(h)},c=a(r),l=a(o);return e.jsxs(m.Fragment,{children:[e.jsx("div",{className:s.container,children:e.jsx(v,{size:n,lenseSize:i,url:t})}),e.jsxs("div",{className:s.controls,children:[e.jsxs("label",{className:s.label,children:[e.jsx("span",{className:s.labelText,children:"Размер изображений"}),e.jsx("input",{type:"text",value:n,onChange:c})]}),e.jsxs("label",{className:s.label,children:[e.jsx("span",{className:s.labelText,children:"Размер линзы"}),e.jsx("input",{type:"text",value:i,onChange:l})]})]})]})},ee={title:"Native/Lense",decorators:[T({width:"100%",padding:20,flexDirection:"column"}),$]},y=()=>e.jsx(A,{});var j;y.parameters={...y.parameters,storySource:{source:"() => <LenseContainer />",...(j=y.parameters)==null?void 0:j.storySource}};export{y as Example,ee as default};
//# sourceMappingURL=Lense.story-82a90fb6.js.map
