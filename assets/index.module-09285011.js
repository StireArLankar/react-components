import{e as k,$ as K,_ as w,a as B,b as Y,f as V,c as h,d as $}from"./index.module-a8f8c212.js";import{r as t,a as z}from"./index-f1f749bf.js";import{$ as H}from"./index.module-e531cb23.js";const j=z["useId".toString()]||(()=>{});let q=0;function J(e){const[o,r]=t.useState(j());return k(()=>{e||r(n=>n??String(q++))},[e]),e||(o?`radix-${o}`:"")}const Q=t.createContext(void 0);function W(e){const o=t.useContext(Q);return e||o||"ltr"}const C="rovingFocusGroup.onEntryFocus",X={bubbles:!1,cancelable:!0},_="RovingFocusGroup",[S,P,Z]=H(_),[ee,pe]=K(_,[Z]),[te,oe]=ee(_),ne=t.forwardRef((e,o)=>t.createElement(S.Provider,{scope:e.__scopeRovingFocusGroup},t.createElement(S.Slot,{scope:e.__scopeRovingFocusGroup},t.createElement(re,w({},e,{ref:o}))))),re=t.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:m=!1,dir:I,currentTabStopId:g,defaultCurrentTabStopId:F,onCurrentTabStopIdChange:i,onEntryFocus:a,...E}=e,l=t.useRef(null),p=B(o,l),v=W(I),[f=null,u]=Y({prop:g,defaultProp:F,onChange:i}),[x,s]=t.useState(!1),d=V(a),y=P(r),R=t.useRef(!1),[O,A]=t.useState(0);return t.useEffect(()=>{const c=l.current;if(c)return c.addEventListener(C,d),()=>c.removeEventListener(C,d)},[d]),t.createElement(te,{scope:r,orientation:n,dir:v,loop:m,currentTabStopId:f,onItemFocus:t.useCallback(c=>u(c),[u]),onItemShiftTab:t.useCallback(()=>s(!0),[]),onFocusableItemAdd:t.useCallback(()=>A(c=>c+1),[]),onFocusableItemRemove:t.useCallback(()=>A(c=>c-1),[])},t.createElement(h.div,w({tabIndex:x||O===0?-1:0,"data-orientation":n},E,{ref:p,style:{outline:"none",...e.style},onMouseDown:$(e.onMouseDown,()=>{R.current=!0}),onFocus:$(e.onFocus,c=>{const N=!R.current;if(c.target===c.currentTarget&&N&&!x){const D=new CustomEvent(C,X);if(c.currentTarget.dispatchEvent(D),!D.defaultPrevented){const T=y().filter(b=>b.focusable),M=T.find(b=>b.active),L=T.find(b=>b.id===f),U=[M,L,...T].filter(Boolean).map(b=>b.ref.current);G(U)}}R.current=!1}),onBlur:$(e.onBlur,()=>s(!1))})))}),ce="RovingFocusGroupItem",fe=t.forwardRef((e,o)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:m=!1,tabStopId:I,...g}=e,F=J(),i=I||F,a=oe(ce,r),E=a.currentTabStopId===i,l=P(r),{onFocusableItemAdd:p,onFocusableItemRemove:v}=a;return t.useEffect(()=>{if(n)return p(),()=>v()},[n,p,v]),t.createElement(S.ItemSlot,{scope:r,id:i,focusable:n,active:m},t.createElement(h.span,w({tabIndex:E?0:-1,"data-orientation":a.orientation},g,{ref:o,onMouseDown:$(e.onMouseDown,f=>{n?a.onItemFocus(i):f.preventDefault()}),onFocus:$(e.onFocus,()=>a.onItemFocus(i)),onKeyDown:$(e.onKeyDown,f=>{if(f.key==="Tab"&&f.shiftKey){a.onItemShiftTab();return}if(f.target!==f.currentTarget)return;const u=de(f,a.orientation,a.dir);if(u!==void 0){f.preventDefault();let s=l().filter(d=>d.focusable).map(d=>d.ref.current);if(u==="last")s.reverse();else if(u==="prev"||u==="next"){u==="prev"&&s.reverse();const d=s.indexOf(f.currentTarget);s=a.loop?ue(s,d+1):s.slice(d+1)}setTimeout(()=>G(s))}})})))}),ae={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function se(e,o){return o!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function de(e,o,r){const n=se(e.key,r);if(!(o==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(o==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return ae[n]}function G(e){const o=document.activeElement;for(const r of e)if(r===o||(r.focus(),document.activeElement!==o))return}function ue(e,o){return e.map((r,n)=>e[(o+n)%e.length])}const ve=ne,me=fe;export{pe as $,W as a,J as b,ve as c,me as d};
//# sourceMappingURL=index.module-09285011.js.map
