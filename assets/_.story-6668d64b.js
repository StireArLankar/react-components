import{j as c,w as q}from"./withCustomTheme-ab58be2d.js";import{w as P}from"./withCenteredStyle-93f62c3f.js";import{r as i,R as N}from"./index-f1f749bf.js";import{u as $}from"./web-35f33cb2.js";import{u as k,a as E}from"./react-spring-web.esm-dd561a21.js";import{u as L}from"./use-gesture-react.esm-c354a664.js";import"./story.css-e50b5b1c.js";import"./_commonjsHelpers-042e6b4d.js";import"./index-96c5f47c.js";const g={wrapper:"_1szfkn0",slides:"_1szfkn1",item:"_1szfkn2",item2:"_1szfkn3",buttonsWrapper:"_1szfkn4",controls:"_1szfkn5",fill:"_1szfkn6"},j=({progress:s})=>{const{x:e}=k({x:isNaN(s)?0:s});return c.jsx("div",{className:g.controls,children:c.jsx(E.div,{className:g.fill,style:{transform:e.to(t=>`scaleX(${t})`)}})})};try{j.displayName="Control",j.__docgenInfo={description:"",displayName:"Control",props:{progress:{defaultValue:null,description:"",name:"progress",required:!0,type:{name:"number"}}}}}catch{}const W=s=>`translate3d(${s}px, 0, 0)`,G=(s,e,t,r)=>{const a=r*e,n=s%a,S=n>0?0:a,x=n+S,f=x-r*t;return t===0&&x>a-r?x-a:Math.min(Math.max(f,r*-1),r*2)},X=(s,e,t)=>{const r=s%e,a=(s-r)/e;return r>e/2?t+a+1:r<-e/2?t+a-1:t+a},B=(s,e)=>{const t=s%e;return t<0?-t/e:(e-t)/e},R=s=>{const{children:e,interval:t=4e3}=s,[r,a]=i.useState(!1),n=i.useMemo(()=>N.Children.count(e),[e]),S=()=>a(!0),x=()=>a(!1),[f,v]=i.useState(!1),y=i.useRef(!1),[b,{width:d}]=$({debounce:100}),[m,h]=i.useState(0),[{x:I},p]=k(()=>({x:0,onStart:()=>{y.current=!0},onRest:()=>h(C),immediate:!1})),C=i.useCallback(o=>{if(y.current=!1,Math.abs(o)>n){const l=o<0?(o%n+n)%n:o%n;return p.start({x:d*l,immediate:!0}),l}return o},[n,p,d]),M=L(({movement:[o],down:l,cancel:_})=>{if(n<2){_&&_();return}l?(v(!0),p.start({x:m*d+o*2})):(v(!1),h(H=>X(o*2,d,H)))});i.useEffect(()=>{console.log({selected:m}),p.start({x:d*m,immediate:!1,onRest:()=>h(C)})},[d,p,m,f,C]),i.useEffect(()=>{if(r||f||n<=1)return;let o;const l=()=>{y.current||h(_=>_-1),o=setTimeout(l,t)};return o=setTimeout(l,t),()=>clearTimeout(o)},[r,f,t,n]);const u=()=>N.Children.map(e,(o,l)=>c.jsx(E.li,{className:g.item,style:{transform:I.to(_=>W(G(_,n,l,d)))},children:o}));return c.jsxs("div",{className:g.wrapper,onMouseEnter:S,onMouseLeave:x,ref:b,children:[c.jsx("ul",{className:g.slides,...M(),children:u()}),c.jsx(j,{progress:B(m,n)})]})};try{R.displayName="AutoSlider",R.__docgenInfo={description:"",displayName:"AutoSlider",props:{interval:{defaultValue:null,description:"",name:"interval",required:!1,type:{name:"number"}}}}}catch{}const F=s=>`translate3d(-${s*100}%, 0, 0)`,J=(s,e)=>{const t=s%e,r=t>0?0:e,a=t+r;return e-Math.min(a,e)},K=(s,e,t)=>{const r=s%e,a=(s-r)/e;return r>e/2?t+a+1:r<-e/2?t+a-1:t+a},O=(s,e)=>{const t=s%e;return t<0?-t/e:(e-t)/e},T=s=>{const{children:e,interval:t=4e3}=s,[r,a]=i.useState(!1),n=i.useMemo(()=>N.Children.count(e),[e]),S=()=>a(!0),x=()=>a(!1),[f,v]=i.useState(!1),y=i.useRef(!1),[b,{width:d}]=$(),[m,h]=i.useState(0),[{x:I},p]=k(()=>({x:0,onStart:()=>{y.current=!0},onRest:()=>{y.current=!1}})),C=L(({movement:[u],down:o,cancel:l})=>{if(n<2){l&&l();return}o?(v(!0),p.start({x:m+u*2/d})):(v(!1),h(_=>K(u*2,d,_)))});i.useEffect(()=>void p.start({x:m}),[p,m,f]),i.useEffect(()=>{let u;if(!r&&!f&&n>1){const o=()=>{y.current||h(l=>l-1),u=setTimeout(o,t)};u=setTimeout(o,t)}return()=>clearTimeout(u)},[r,f,t,n]);const M=()=>N.Children.map(e,(u,o)=>c.jsx("li",{className:g.item2,children:u},o));return c.jsxs("div",{className:g.wrapper,onMouseEnter:S,onMouseLeave:x,ref:b,children:[c.jsxs(E.ul,{className:g.slides,...C(),style:{transform:I.to(u=>F(J(u,n))),overflow:"unset"},children:[n>1&&M(),c.jsx("li",{className:g.item2,children:N.Children.toArray(e)[0]})]}),c.jsx(j,{progress:O(m,n)})]})};try{T.displayName="ListSlider",T.__docgenInfo={description:"",displayName:"ListSlider",props:{interval:{defaultValue:null,description:"",name:"interval",required:!1,type:{name:"number"}}}}}catch{}const D=["red","blue","yellow","orange"],Q={width:"100%",height:"100%",opacity:.7},U=({amount:s,Component:e})=>c.jsx(e,{children:D.slice(0,s).map((t,r)=>c.jsx("div",{style:{...Q,background:t}},r))}),ie={component:U,title:"Gesture/Auto Slider",decorators:[P({width:"100%"}),q],args:{amount:3},argTypes:{amount:{type:"number",control:{type:"range",min:1,max:D.length,step:1}}}},w={args:{Component:R}},A={args:{Component:T}};var V;w.parameters={...w.parameters,storySource:{source:`{
  args: {
    Component: AutoSlider
  }
}`,...(V=w.parameters)==null?void 0:V.storySource}};var z;A.parameters={...A.parameters,storySource:{source:`{
  args: {
    Component: ListSlider
  }
}`,...(z=A.parameters)==null?void 0:z.storySource}};export{w as AnimateIndividualSlides,A as AnimateWholeContainer,ie as default};
//# sourceMappingURL=_.story-6668d64b.js.map
