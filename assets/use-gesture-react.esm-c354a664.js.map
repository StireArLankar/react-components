{"version":3,"file":"use-gesture-react.esm-c354a664.js","sources":["../../node_modules/@use-gesture/core/dist/maths-0ab39ae9.esm.js","../../node_modules/@use-gesture/core/dist/actions-b1cc53c2.esm.js","../../node_modules/@use-gesture/core/dist/use-gesture-core.esm.js","../../node_modules/@use-gesture/react/dist/use-gesture-react.esm.js"],"sourcesContent":["function clamp(v, min, max) {\n  return Math.max(min, Math.min(v, max));\n}\nconst V = {\n  toVector(v, fallback) {\n    if (v === undefined) v = fallback;\n    return Array.isArray(v) ? v : [v, v];\n  },\n  add(v1, v2) {\n    return [v1[0] + v2[0], v1[1] + v2[1]];\n  },\n  sub(v1, v2) {\n    return [v1[0] - v2[0], v1[1] - v2[1]];\n  },\n  addTo(v1, v2) {\n    v1[0] += v2[0];\n    v1[1] += v2[1];\n  },\n  subTo(v1, v2) {\n    v1[0] -= v2[0];\n    v1[1] -= v2[1];\n  }\n};\nfunction rubberband(distance, dimension, constant) {\n  if (dimension === 0 || Math.abs(dimension) === Infinity) return Math.pow(distance, constant * 5);\n  return distance * dimension * constant / (dimension + constant * distance);\n}\nfunction rubberbandIfOutOfBounds(position, min, max, constant = 0.15) {\n  if (constant === 0) return clamp(position, min, max);\n  if (position < min) return -rubberband(min - position, max - min, constant) + min;\n  if (position > max) return +rubberband(position - max, max - min, constant) + max;\n  return position;\n}\nfunction computeRubberband(bounds, [Vx, Vy], [Rx, Ry]) {\n  const [[X0, X1], [Y0, Y1]] = bounds;\n  return [rubberbandIfOutOfBounds(Vx, X0, X1, Rx), rubberbandIfOutOfBounds(Vy, Y0, Y1, Ry)];\n}\n\nexport { V, computeRubberband as c, rubberbandIfOutOfBounds as r };\n","import { V, c as computeRubberband } from './maths-0ab39ae9.esm.js';\n\nfunction _toPrimitive(input, hint) {\n  if (typeof input !== \"object\" || input === null) return input;\n  var prim = input[Symbol.toPrimitive];\n  if (prim !== undefined) {\n    var res = prim.call(input, hint || \"default\");\n    if (typeof res !== \"object\") return res;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (hint === \"string\" ? String : Number)(input);\n}\n\nfunction _toPropertyKey(arg) {\n  var key = _toPrimitive(arg, \"string\");\n  return typeof key === \"symbol\" ? key : String(key);\n}\n\nfunction _defineProperty(obj, key, value) {\n  key = _toPropertyKey(key);\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    enumerableOnly && (symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    })), keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = null != arguments[i] ? arguments[i] : {};\n    i % 2 ? ownKeys(Object(source), !0).forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) {\n      Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n    });\n  }\n  return target;\n}\n\nconst EVENT_TYPE_MAP = {\n  pointer: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  mouse: {\n    start: 'down',\n    change: 'move',\n    end: 'up'\n  },\n  touch: {\n    start: 'start',\n    change: 'move',\n    end: 'end'\n  },\n  gesture: {\n    start: 'start',\n    change: 'change',\n    end: 'end'\n  }\n};\nfunction capitalize(string) {\n  if (!string) return '';\n  return string[0].toUpperCase() + string.slice(1);\n}\nconst actionsWithoutCaptureSupported = ['enter', 'leave'];\nfunction hasCapture(capture = false, actionKey) {\n  return capture && !actionsWithoutCaptureSupported.includes(actionKey);\n}\nfunction toHandlerProp(device, action = '', capture = false) {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return 'on' + capitalize(device) + capitalize(actionKey) + (hasCapture(capture, actionKey) ? 'Capture' : '');\n}\nconst pointerCaptureEvents = ['gotpointercapture', 'lostpointercapture'];\nfunction parseProp(prop) {\n  let eventKey = prop.substring(2).toLowerCase();\n  const passive = !!~eventKey.indexOf('passive');\n  if (passive) eventKey = eventKey.replace('passive', '');\n  const captureKey = pointerCaptureEvents.includes(eventKey) ? 'capturecapture' : 'capture';\n  const capture = !!~eventKey.indexOf(captureKey);\n  if (capture) eventKey = eventKey.replace('capture', '');\n  return {\n    device: eventKey,\n    capture,\n    passive\n  };\n}\nfunction toDomEventType(device, action = '') {\n  const deviceProps = EVENT_TYPE_MAP[device];\n  const actionKey = deviceProps ? deviceProps[action] || action : action;\n  return device + actionKey;\n}\nfunction isTouch(event) {\n  return 'touches' in event;\n}\nfunction getPointerType(event) {\n  if (isTouch(event)) return 'touch';\n  if ('pointerType' in event) return event.pointerType;\n  return 'mouse';\n}\nfunction getCurrentTargetTouchList(event) {\n  return Array.from(event.touches).filter(e => {\n    var _event$currentTarget, _event$currentTarget$;\n    return e.target === event.currentTarget || ((_event$currentTarget = event.currentTarget) === null || _event$currentTarget === void 0 ? void 0 : (_event$currentTarget$ = _event$currentTarget.contains) === null || _event$currentTarget$ === void 0 ? void 0 : _event$currentTarget$.call(_event$currentTarget, e.target));\n  });\n}\nfunction getTouchList(event) {\n  return event.type === 'touchend' || event.type === 'touchcancel' ? event.changedTouches : event.targetTouches;\n}\nfunction getValueEvent(event) {\n  return isTouch(event) ? getTouchList(event)[0] : event;\n}\nfunction distanceAngle(P1, P2) {\n  const dx = P2.clientX - P1.clientX;\n  const dy = P2.clientY - P1.clientY;\n  const cx = (P2.clientX + P1.clientX) / 2;\n  const cy = (P2.clientY + P1.clientY) / 2;\n  const distance = Math.hypot(dx, dy);\n  const angle = -(Math.atan2(dx, dy) * 180) / Math.PI;\n  const origin = [cx, cy];\n  return {\n    angle,\n    distance,\n    origin\n  };\n}\nfunction touchIds(event) {\n  return getCurrentTargetTouchList(event).map(touch => touch.identifier);\n}\nfunction touchDistanceAngle(event, ids) {\n  const [P1, P2] = Array.from(event.touches).filter(touch => ids.includes(touch.identifier));\n  return distanceAngle(P1, P2);\n}\nfunction pointerId(event) {\n  const valueEvent = getValueEvent(event);\n  return isTouch(event) ? valueEvent.identifier : valueEvent.pointerId;\n}\nfunction pointerValues(event) {\n  const valueEvent = getValueEvent(event);\n  return [valueEvent.clientX, valueEvent.clientY];\n}\nconst LINE_HEIGHT = 40;\nconst PAGE_HEIGHT = 800;\nfunction wheelValues(event) {\n  let {\n    deltaX,\n    deltaY,\n    deltaMode\n  } = event;\n  if (deltaMode === 1) {\n    deltaX *= LINE_HEIGHT;\n    deltaY *= LINE_HEIGHT;\n  } else if (deltaMode === 2) {\n    deltaX *= PAGE_HEIGHT;\n    deltaY *= PAGE_HEIGHT;\n  }\n  return [deltaX, deltaY];\n}\nfunction scrollValues(event) {\n  var _ref, _ref2;\n  const {\n    scrollX,\n    scrollY,\n    scrollLeft,\n    scrollTop\n  } = event.currentTarget;\n  return [(_ref = scrollX !== null && scrollX !== void 0 ? scrollX : scrollLeft) !== null && _ref !== void 0 ? _ref : 0, (_ref2 = scrollY !== null && scrollY !== void 0 ? scrollY : scrollTop) !== null && _ref2 !== void 0 ? _ref2 : 0];\n}\nfunction getEventDetails(event) {\n  const payload = {};\n  if ('buttons' in event) payload.buttons = event.buttons;\n  if ('shiftKey' in event) {\n    const {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    } = event;\n    Object.assign(payload, {\n      shiftKey,\n      altKey,\n      metaKey,\n      ctrlKey\n    });\n  }\n  return payload;\n}\n\nfunction call(v, ...args) {\n  if (typeof v === 'function') {\n    return v(...args);\n  } else {\n    return v;\n  }\n}\nfunction noop() {}\nfunction chain(...fns) {\n  if (fns.length === 0) return noop;\n  if (fns.length === 1) return fns[0];\n  return function () {\n    let result;\n    for (const fn of fns) {\n      result = fn.apply(this, arguments) || result;\n    }\n    return result;\n  };\n}\nfunction assignDefault(value, fallback) {\n  return Object.assign({}, fallback, value || {});\n}\n\nconst BEFORE_LAST_KINEMATICS_DELAY = 32;\nclass Engine {\n  constructor(ctrl, args, key) {\n    this.ctrl = ctrl;\n    this.args = args;\n    this.key = key;\n    if (!this.state) {\n      this.state = {};\n      this.computeValues([0, 0]);\n      this.computeInitial();\n      if (this.init) this.init();\n      this.reset();\n    }\n  }\n  get state() {\n    return this.ctrl.state[this.key];\n  }\n  set state(state) {\n    this.ctrl.state[this.key] = state;\n  }\n  get shared() {\n    return this.ctrl.state.shared;\n  }\n  get eventStore() {\n    return this.ctrl.gestureEventStores[this.key];\n  }\n  get timeoutStore() {\n    return this.ctrl.gestureTimeoutStores[this.key];\n  }\n  get config() {\n    return this.ctrl.config[this.key];\n  }\n  get sharedConfig() {\n    return this.ctrl.config.shared;\n  }\n  get handler() {\n    return this.ctrl.handlers[this.key];\n  }\n  reset() {\n    const {\n      state,\n      shared,\n      ingKey,\n      args\n    } = this;\n    shared[ingKey] = state._active = state.active = state._blocked = state._force = false;\n    state._step = [false, false];\n    state.intentional = false;\n    state._movement = [0, 0];\n    state._distance = [0, 0];\n    state._direction = [0, 0];\n    state._delta = [0, 0];\n    state._bounds = [[-Infinity, Infinity], [-Infinity, Infinity]];\n    state.args = args;\n    state.axis = undefined;\n    state.memo = undefined;\n    state.elapsedTime = 0;\n    state.direction = [0, 0];\n    state.distance = [0, 0];\n    state.overflow = [0, 0];\n    state._movementBound = [false, false];\n    state.velocity = [0, 0];\n    state.movement = [0, 0];\n    state.delta = [0, 0];\n    state.timeStamp = 0;\n  }\n  start(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._active) {\n      this.reset();\n      this.computeInitial();\n      state._active = true;\n      state.target = event.target;\n      state.currentTarget = event.currentTarget;\n      state.lastOffset = config.from ? call(config.from, state) : state.offset;\n      state.offset = state.lastOffset;\n    }\n    state.startTime = state.timeStamp = event.timeStamp;\n  }\n  computeValues(values) {\n    const state = this.state;\n    state._values = values;\n    state.values = this.config.transform(values);\n  }\n  computeInitial() {\n    const state = this.state;\n    state._initial = state._values;\n    state.initial = state.values;\n  }\n  compute(event) {\n    const {\n      state,\n      config,\n      shared\n    } = this;\n    state.args = this.args;\n    let dt = 0;\n    if (event) {\n      state.event = event;\n      if (config.preventDefault && event.cancelable) state.event.preventDefault();\n      state.type = event.type;\n      shared.touches = this.ctrl.pointerIds.size || this.ctrl.touchIds.size;\n      shared.locked = !!document.pointerLockElement;\n      Object.assign(shared, getEventDetails(event));\n      shared.down = shared.pressed = shared.buttons % 2 === 1 || shared.touches > 0;\n      dt = event.timeStamp - state.timeStamp;\n      state.timeStamp = event.timeStamp;\n      state.elapsedTime = state.timeStamp - state.startTime;\n    }\n    if (state._active) {\n      const _absoluteDelta = state._delta.map(Math.abs);\n      V.addTo(state._distance, _absoluteDelta);\n    }\n    if (this.axisIntent) this.axisIntent(event);\n    const [_m0, _m1] = state._movement;\n    const [t0, t1] = config.threshold;\n    const {\n      _step,\n      values\n    } = state;\n    if (config.hasCustomTransform) {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && values[0];\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && values[1];\n    } else {\n      if (_step[0] === false) _step[0] = Math.abs(_m0) >= t0 && Math.sign(_m0) * t0;\n      if (_step[1] === false) _step[1] = Math.abs(_m1) >= t1 && Math.sign(_m1) * t1;\n    }\n    state.intentional = _step[0] !== false || _step[1] !== false;\n    if (!state.intentional) return;\n    const movement = [0, 0];\n    if (config.hasCustomTransform) {\n      const [v0, v1] = values;\n      movement[0] = _step[0] !== false ? v0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? v1 - _step[1] : 0;\n    } else {\n      movement[0] = _step[0] !== false ? _m0 - _step[0] : 0;\n      movement[1] = _step[1] !== false ? _m1 - _step[1] : 0;\n    }\n    if (this.restrictToAxis && !state._blocked) this.restrictToAxis(movement);\n    const previousOffset = state.offset;\n    const gestureIsActive = state._active && !state._blocked || state.active;\n    if (gestureIsActive) {\n      state.first = state._active && !state.active;\n      state.last = !state._active && state.active;\n      state.active = shared[this.ingKey] = state._active;\n      if (event) {\n        if (state.first) {\n          if ('bounds' in config) state._bounds = call(config.bounds, state);\n          if (this.setup) this.setup();\n        }\n        state.movement = movement;\n        this.computeOffset();\n      }\n    }\n    const [ox, oy] = state.offset;\n    const [[x0, x1], [y0, y1]] = state._bounds;\n    state.overflow = [ox < x0 ? -1 : ox > x1 ? 1 : 0, oy < y0 ? -1 : oy > y1 ? 1 : 0];\n    state._movementBound[0] = state.overflow[0] ? state._movementBound[0] === false ? state._movement[0] : state._movementBound[0] : false;\n    state._movementBound[1] = state.overflow[1] ? state._movementBound[1] === false ? state._movement[1] : state._movementBound[1] : false;\n    const rubberband = state._active ? config.rubberband || [0, 0] : [0, 0];\n    state.offset = computeRubberband(state._bounds, state.offset, rubberband);\n    state.delta = V.sub(state.offset, previousOffset);\n    this.computeMovement();\n    if (gestureIsActive && (!state.last || dt > BEFORE_LAST_KINEMATICS_DELAY)) {\n      state.delta = V.sub(state.offset, previousOffset);\n      const absoluteDelta = state.delta.map(Math.abs);\n      V.addTo(state.distance, absoluteDelta);\n      state.direction = state.delta.map(Math.sign);\n      state._direction = state._delta.map(Math.sign);\n      if (!state.first && dt > 0) {\n        state.velocity = [absoluteDelta[0] / dt, absoluteDelta[1] / dt];\n      }\n    }\n  }\n  emit() {\n    const state = this.state;\n    const shared = this.shared;\n    const config = this.config;\n    if (!state._active) this.clean();\n    if ((state._blocked || !state.intentional) && !state._force && !config.triggerAllEvents) return;\n    const memo = this.handler(_objectSpread2(_objectSpread2(_objectSpread2({}, shared), state), {}, {\n      [this.aliasKey]: state.values\n    }));\n    if (memo !== undefined) state.memo = memo;\n  }\n  clean() {\n    this.eventStore.clean();\n    this.timeoutStore.clean();\n  }\n}\n\nfunction selectAxis([dx, dy], threshold) {\n  const absDx = Math.abs(dx);\n  const absDy = Math.abs(dy);\n  if (absDx > absDy && absDx > threshold) {\n    return 'x';\n  }\n  if (absDy > absDx && absDy > threshold) {\n    return 'y';\n  }\n  return undefined;\n}\nclass CoordinatesEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"aliasKey\", 'xy');\n  }\n  reset() {\n    super.reset();\n    this.state.axis = undefined;\n  }\n  init() {\n    this.state.offset = [0, 0];\n    this.state.lastOffset = [0, 0];\n  }\n  computeOffset() {\n    this.state.offset = V.add(this.state.lastOffset, this.state.movement);\n  }\n  computeMovement() {\n    this.state.movement = V.sub(this.state.offset, this.state.lastOffset);\n  }\n  axisIntent(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state.axis && event) {\n      const threshold = typeof config.axisThreshold === 'object' ? config.axisThreshold[getPointerType(event)] : config.axisThreshold;\n      state.axis = selectAxis(state._movement, threshold);\n    }\n    state._blocked = (config.lockDirection || !!config.axis) && !state.axis || !!config.axis && config.axis !== state.axis;\n  }\n  restrictToAxis(v) {\n    if (this.config.axis || this.config.lockDirection) {\n      switch (this.state.axis) {\n        case 'x':\n          v[1] = 0;\n          break;\n        case 'y':\n          v[0] = 0;\n          break;\n      }\n    }\n  }\n}\n\nconst identity = v => v;\nconst DEFAULT_RUBBERBAND = 0.15;\nconst commonConfigResolver = {\n  enabled(value = true) {\n    return value;\n  },\n  eventOptions(value, _k, config) {\n    return _objectSpread2(_objectSpread2({}, config.shared.eventOptions), value);\n  },\n  preventDefault(value = false) {\n    return value;\n  },\n  triggerAllEvents(value = false) {\n    return value;\n  },\n  rubberband(value = 0) {\n    switch (value) {\n      case true:\n        return [DEFAULT_RUBBERBAND, DEFAULT_RUBBERBAND];\n      case false:\n        return [0, 0];\n      default:\n        return V.toVector(value);\n    }\n  },\n  from(value) {\n    if (typeof value === 'function') return value;\n    if (value != null) return V.toVector(value);\n  },\n  transform(value, _k, config) {\n    const transform = value || config.shared.transform;\n    this.hasCustomTransform = !!transform;\n    if (process.env.NODE_ENV === 'development') {\n      const originalTransform = transform || identity;\n      return v => {\n        const r = originalTransform(v);\n        if (!isFinite(r[0]) || !isFinite(r[1])) {\n          console.warn(`[@use-gesture]: config.transform() must produce a valid result, but it was: [${r[0]},${[1]}]`);\n        }\n        return r;\n      };\n    }\n    return transform || identity;\n  },\n  threshold(value) {\n    return V.toVector(value, 0);\n  }\n};\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(commonConfigResolver, {\n    domTarget(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n      }\n      return NaN;\n    },\n    lockDirection(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`lockDirection\\` option has been merged with \\`axis\\`. Use it as in \\`{ axis: 'lock' }\\``);\n      }\n      return NaN;\n    },\n    initial(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`initial\\` option has been renamed to \\`from\\`.`);\n      }\n      return NaN;\n    }\n  });\n}\n\nconst DEFAULT_AXIS_THRESHOLD = 0;\nconst coordinatesConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  axis(_v, _k, {\n    axis\n  }) {\n    this.lockDirection = axis === 'lock';\n    if (!this.lockDirection) return axis;\n  },\n  axisThreshold(value = DEFAULT_AXIS_THRESHOLD) {\n    return value;\n  },\n  bounds(value = {}) {\n    if (typeof value === 'function') {\n      return state => coordinatesConfigResolver.bounds(value(state));\n    }\n    if ('current' in value) {\n      return () => value.current;\n    }\n    if (typeof HTMLElement === 'function' && value instanceof HTMLElement) {\n      return value;\n    }\n    const {\n      left = -Infinity,\n      right = Infinity,\n      top = -Infinity,\n      bottom = Infinity\n    } = value;\n    return [[left, right], [top, bottom]];\n  }\n});\n\nconst KEYS_DELTA_MAP = {\n  ArrowRight: (displacement, factor = 1) => [displacement * factor, 0],\n  ArrowLeft: (displacement, factor = 1) => [-1 * displacement * factor, 0],\n  ArrowUp: (displacement, factor = 1) => [0, -1 * displacement * factor],\n  ArrowDown: (displacement, factor = 1) => [0, displacement * factor]\n};\nclass DragEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'dragging');\n  }\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._pointerId = undefined;\n    state._pointerActive = false;\n    state._keyboardActive = false;\n    state._preventScroll = false;\n    state._delayed = false;\n    state.swipe = [0, 0];\n    state.tap = false;\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n  }\n  setup() {\n    const state = this.state;\n    if (state._bounds instanceof HTMLElement) {\n      const boundRect = state._bounds.getBoundingClientRect();\n      const targetRect = state.currentTarget.getBoundingClientRect();\n      const _bounds = {\n        left: boundRect.left - targetRect.left + state.offset[0],\n        right: boundRect.right - targetRect.right + state.offset[0],\n        top: boundRect.top - targetRect.top + state.offset[1],\n        bottom: boundRect.bottom - targetRect.bottom + state.offset[1]\n      };\n      state._bounds = coordinatesConfigResolver.bounds(_bounds);\n    }\n  }\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    state.canceled = true;\n    state._active = false;\n    setTimeout(() => {\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n  setActive() {\n    this.state._active = this.state._pointerActive || this.state._keyboardActive;\n  }\n  clean() {\n    this.pointerClean();\n    this.state._pointerActive = false;\n    this.state._keyboardActive = false;\n    super.clean();\n  }\n  pointerDown(event) {\n    const config = this.config;\n    const state = this.state;\n    if (event.buttons != null && (Array.isArray(config.pointerButtons) ? !config.pointerButtons.includes(event.buttons) : config.pointerButtons !== -1 && config.pointerButtons !== event.buttons)) return;\n    const ctrlIds = this.ctrl.setEventIds(event);\n    if (config.pointerCapture) {\n      event.target.setPointerCapture(event.pointerId);\n    }\n    if (ctrlIds && ctrlIds.size > 1 && state._pointerActive) return;\n    this.start(event);\n    this.setupPointer(event);\n    state._pointerId = pointerId(event);\n    state._pointerActive = true;\n    this.computeValues(pointerValues(event));\n    this.computeInitial();\n    if (config.preventScrollAxis && getPointerType(event) !== 'mouse') {\n      state._active = false;\n      this.setupScrollPrevention(event);\n    } else if (config.delay > 0) {\n      this.setupDelayTrigger(event);\n      if (config.triggerAllEvents) {\n        this.compute(event);\n        this.emit();\n      }\n    } else {\n      this.startPointerDrag(event);\n    }\n  }\n  startPointerDrag(event) {\n    const state = this.state;\n    state._active = true;\n    state._preventScroll = true;\n    state._delayed = false;\n    this.compute(event);\n    this.emit();\n  }\n  pointerMove(event) {\n    const state = this.state;\n    const config = this.config;\n    if (!state._pointerActive) return;\n    if (state.type === event.type && event.timeStamp === state.timeStamp) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n    const _values = pointerValues(event);\n    if (document.pointerLockElement === event.target) {\n      state._delta = [event.movementX, event.movementY];\n    } else {\n      state._delta = V.sub(_values, state._values);\n      this.computeValues(_values);\n    }\n    V.addTo(state._movement, state._delta);\n    this.compute(event);\n    if (state._delayed && state.intentional) {\n      this.timeoutStore.remove('dragDelay');\n      state.active = false;\n      this.startPointerDrag(event);\n      return;\n    }\n    if (config.preventScrollAxis && !state._preventScroll) {\n      if (state.axis) {\n        if (state.axis === config.preventScrollAxis || config.preventScrollAxis === 'xy') {\n          state._active = false;\n          this.clean();\n          return;\n        } else {\n          this.timeoutStore.remove('startPointerDrag');\n          this.startPointerDrag(event);\n          return;\n        }\n      } else {\n        return;\n      }\n    }\n    this.emit();\n  }\n  pointerUp(event) {\n    this.ctrl.setEventIds(event);\n    try {\n      if (this.config.pointerCapture && event.target.hasPointerCapture(event.pointerId)) {\n        ;\n        event.target.releasePointerCapture(event.pointerId);\n      }\n    } catch (_unused) {\n      if (process.env.NODE_ENV === 'development') {\n        console.warn(`[@use-gesture]: If you see this message, it's likely that you're using an outdated version of \\`@react-three/fiber\\`. \\n\\nPlease upgrade to the latest version.`);\n      }\n    }\n    const state = this.state;\n    const config = this.config;\n    if (!state._active || !state._pointerActive) return;\n    const id = pointerId(event);\n    if (state._pointerId !== undefined && id !== state._pointerId) return;\n    this.state._pointerActive = false;\n    this.setActive();\n    this.compute(event);\n    const [dx, dy] = state._distance;\n    state.tap = dx <= config.tapsThreshold && dy <= config.tapsThreshold;\n    if (state.tap && config.filterTaps) {\n      state._force = true;\n    } else {\n      const [dirx, diry] = state.direction;\n      const [vx, vy] = state.velocity;\n      const [mx, my] = state.movement;\n      const [svx, svy] = config.swipe.velocity;\n      const [sx, sy] = config.swipe.distance;\n      const sdt = config.swipe.duration;\n      if (state.elapsedTime < sdt) {\n        if (Math.abs(vx) > svx && Math.abs(mx) > sx) state.swipe[0] = dirx;\n        if (Math.abs(vy) > svy && Math.abs(my) > sy) state.swipe[1] = diry;\n      }\n    }\n    this.emit();\n  }\n  pointerClick(event) {\n    if (!this.state.tap && event.detail > 0) {\n      event.preventDefault();\n      event.stopPropagation();\n    }\n  }\n  setupPointer(event) {\n    const config = this.config;\n    const device = config.device;\n    if (process.env.NODE_ENV === 'development') {\n      try {\n        if (device === 'pointer' && config.preventScrollDelay === undefined) {\n          const currentTarget = 'uv' in event ? event.sourceEvent.currentTarget : event.currentTarget;\n          const style = window.getComputedStyle(currentTarget);\n          if (style.touchAction === 'auto') {\n            console.warn(`[@use-gesture]: The drag target has its \\`touch-action\\` style property set to \\`auto\\`. It is recommended to add \\`touch-action: 'none'\\` so that the drag gesture behaves correctly on touch-enabled devices. For more information read this: https://use-gesture.netlify.app/docs/extras/#touch-action.\\n\\nThis message will only show in development mode. It won't appear in production. If this is intended, you can ignore it.`, currentTarget);\n          }\n        }\n      } catch (_unused2) {}\n    }\n    if (config.pointerLock) {\n      event.currentTarget.requestPointerLock();\n    }\n    if (!config.pointerCapture) {\n      this.eventStore.add(this.sharedConfig.window, device, 'change', this.pointerMove.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'end', this.pointerUp.bind(this));\n      this.eventStore.add(this.sharedConfig.window, device, 'cancel', this.pointerUp.bind(this));\n    }\n  }\n  pointerClean() {\n    if (this.config.pointerLock && document.pointerLockElement === this.state.currentTarget) {\n      document.exitPointerLock();\n    }\n  }\n  preventScroll(event) {\n    if (this.state._preventScroll && event.cancelable) {\n      event.preventDefault();\n    }\n  }\n  setupScrollPrevention(event) {\n    this.state._preventScroll = false;\n    persistEvent(event);\n    const remove = this.eventStore.add(this.sharedConfig.window, 'touch', 'change', this.preventScroll.bind(this), {\n      passive: false\n    });\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'end', remove);\n    this.eventStore.add(this.sharedConfig.window, 'touch', 'cancel', remove);\n    this.timeoutStore.add('startPointerDrag', this.startPointerDrag.bind(this), this.config.preventScrollDelay, event);\n  }\n  setupDelayTrigger(event) {\n    this.state._delayed = true;\n    this.timeoutStore.add('dragDelay', () => {\n      this.state._step = [0, 0];\n      this.startPointerDrag(event);\n    }, this.config.delay);\n  }\n  keyDown(event) {\n    const deltaFn = KEYS_DELTA_MAP[event.key];\n    if (deltaFn) {\n      const state = this.state;\n      const factor = event.shiftKey ? 10 : event.altKey ? 0.1 : 1;\n      this.start(event);\n      state._delta = deltaFn(this.config.keyboardDisplacement, factor);\n      state._keyboardActive = true;\n      V.addTo(state._movement, state._delta);\n      this.compute(event);\n      this.emit();\n    }\n  }\n  keyUp(event) {\n    if (!(event.key in KEYS_DELTA_MAP)) return;\n    this.state._keyboardActive = false;\n    this.setActive();\n    this.compute(event);\n    this.emit();\n  }\n  bind(bindFunction) {\n    const device = this.config.device;\n    bindFunction(device, 'start', this.pointerDown.bind(this));\n    if (this.config.pointerCapture) {\n      bindFunction(device, 'change', this.pointerMove.bind(this));\n      bindFunction(device, 'end', this.pointerUp.bind(this));\n      bindFunction(device, 'cancel', this.pointerUp.bind(this));\n      bindFunction('lostPointerCapture', '', this.pointerUp.bind(this));\n    }\n    if (this.config.keys) {\n      bindFunction('key', 'down', this.keyDown.bind(this));\n      bindFunction('key', 'up', this.keyUp.bind(this));\n    }\n    if (this.config.filterTaps) {\n      bindFunction('click', '', this.pointerClick.bind(this), {\n        capture: true,\n        passive: false\n      });\n    }\n  }\n}\nfunction persistEvent(event) {\n  'persist' in event && typeof event.persist === 'function' && event.persist();\n}\n\nconst isBrowser = typeof window !== 'undefined' && window.document && window.document.createElement;\nfunction supportsTouchEvents() {\n  return isBrowser && 'ontouchstart' in window;\n}\nfunction isTouchScreen() {\n  return supportsTouchEvents() || isBrowser && window.navigator.maxTouchPoints > 1;\n}\nfunction supportsPointerEvents() {\n  return isBrowser && 'onpointerdown' in window;\n}\nfunction supportsPointerLock() {\n  return isBrowser && 'exitPointerLock' in window.document;\n}\nfunction supportsGestureEvents() {\n  try {\n    return 'constructor' in GestureEvent;\n  } catch (e) {\n    return false;\n  }\n}\nconst SUPPORT = {\n  isBrowser,\n  gesture: supportsGestureEvents(),\n  touch: isTouchScreen(),\n  touchscreen: isTouchScreen(),\n  pointer: supportsPointerEvents(),\n  pointerLock: supportsPointerLock()\n};\n\nconst DEFAULT_PREVENT_SCROLL_DELAY = 250;\nconst DEFAULT_DRAG_DELAY = 180;\nconst DEFAULT_SWIPE_VELOCITY = 0.5;\nconst DEFAULT_SWIPE_DISTANCE = 50;\nconst DEFAULT_SWIPE_DURATION = 250;\nconst DEFAULT_KEYBOARD_DISPLACEMENT = 10;\nconst DEFAULT_DRAG_AXIS_THRESHOLD = {\n  mouse: 0,\n  touch: 0,\n  pen: 8\n};\nconst dragConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  device(_v, _k, {\n    pointer: {\n      touch = false,\n      lock = false,\n      mouse = false\n    } = {}\n  }) {\n    this.pointerLock = lock && SUPPORT.pointerLock;\n    if (SUPPORT.touch && touch) return 'touch';\n    if (this.pointerLock) return 'mouse';\n    if (SUPPORT.pointer && !mouse) return 'pointer';\n    if (SUPPORT.touch) return 'touch';\n    return 'mouse';\n  },\n  preventScrollAxis(value, _k, {\n    preventScroll\n  }) {\n    this.preventScrollDelay = typeof preventScroll === 'number' ? preventScroll : preventScroll || preventScroll === undefined && value ? DEFAULT_PREVENT_SCROLL_DELAY : undefined;\n    if (!SUPPORT.touchscreen || preventScroll === false) return undefined;\n    return value ? value : preventScroll !== undefined ? 'y' : undefined;\n  },\n  pointerCapture(_v, _k, {\n    pointer: {\n      capture = true,\n      buttons = 1,\n      keys = true\n    } = {}\n  }) {\n    this.pointerButtons = buttons;\n    this.keys = keys;\n    return !this.pointerLock && this.device === 'pointer' && capture;\n  },\n  threshold(value, _k, {\n    filterTaps = false,\n    tapsThreshold = 3,\n    axis = undefined\n  }) {\n    const threshold = V.toVector(value, filterTaps ? tapsThreshold : axis ? 1 : 0);\n    this.filterTaps = filterTaps;\n    this.tapsThreshold = tapsThreshold;\n    return threshold;\n  },\n  swipe({\n    velocity = DEFAULT_SWIPE_VELOCITY,\n    distance = DEFAULT_SWIPE_DISTANCE,\n    duration = DEFAULT_SWIPE_DURATION\n  } = {}) {\n    return {\n      velocity: this.transform(V.toVector(velocity)),\n      distance: this.transform(V.toVector(distance)),\n      duration\n    };\n  },\n  delay(value = 0) {\n    switch (value) {\n      case true:\n        return DEFAULT_DRAG_DELAY;\n      case false:\n        return 0;\n      default:\n        return value;\n    }\n  },\n  axisThreshold(value) {\n    if (!value) return DEFAULT_DRAG_AXIS_THRESHOLD;\n    return _objectSpread2(_objectSpread2({}, DEFAULT_DRAG_AXIS_THRESHOLD), value);\n  },\n  keyboardDisplacement(value = DEFAULT_KEYBOARD_DISPLACEMENT) {\n    return value;\n  }\n});\nif (process.env.NODE_ENV === 'development') {\n  Object.assign(dragConfigResolver, {\n    useTouch(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`useTouch\\` option has been renamed to \\`pointer.touch\\`. Use it as in \\`{ pointer: { touch: true } }\\`.`);\n      }\n      return NaN;\n    },\n    experimental_preventWindowScrollY(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`experimental_preventWindowScrollY\\` option has been renamed to \\`preventScroll\\`.`);\n      }\n      return NaN;\n    },\n    swipeVelocity(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeVelocity\\` option has been renamed to \\`swipe.velocity\\`. Use it as in \\`{ swipe: { velocity: 0.5 } }\\`.`);\n      }\n      return NaN;\n    },\n    swipeDistance(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDistance\\` option has been renamed to \\`swipe.distance\\`. Use it as in \\`{ swipe: { distance: 50 } }\\`.`);\n      }\n      return NaN;\n    },\n    swipeDuration(value) {\n      if (value !== undefined) {\n        throw Error(`[@use-gesture]: \\`swipeDuration\\` option has been renamed to \\`swipe.duration\\`. Use it as in \\`{ swipe: { duration: 250 } }\\`.`);\n      }\n      return NaN;\n    }\n  });\n}\n\nfunction clampStateInternalMovementToBounds(state) {\n  const [ox, oy] = state.overflow;\n  const [dx, dy] = state._delta;\n  const [dirx, diry] = state._direction;\n  if (ox < 0 && dx > 0 && dirx < 0 || ox > 0 && dx < 0 && dirx > 0) {\n    state._movement[0] = state._movementBound[0];\n  }\n  if (oy < 0 && dy > 0 && diry < 0 || oy > 0 && dy < 0 && diry > 0) {\n    state._movement[1] = state._movementBound[1];\n  }\n}\n\nconst SCALE_ANGLE_RATIO_INTENT_DEG = 30;\nconst PINCH_WHEEL_RATIO = 100;\nclass PinchEngine extends Engine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'pinching');\n    _defineProperty(this, \"aliasKey\", 'da');\n  }\n  init() {\n    this.state.offset = [1, 0];\n    this.state.lastOffset = [1, 0];\n    this.state._pointerEvents = new Map();\n  }\n  reset() {\n    super.reset();\n    const state = this.state;\n    state._touchIds = [];\n    state.canceled = false;\n    state.cancel = this.cancel.bind(this);\n    state.turns = 0;\n  }\n  computeOffset() {\n    const {\n      type,\n      movement,\n      lastOffset\n    } = this.state;\n    if (type === 'wheel') {\n      this.state.offset = V.add(movement, lastOffset);\n    } else {\n      this.state.offset = [(1 + movement[0]) * lastOffset[0], movement[1] + lastOffset[1]];\n    }\n  }\n  computeMovement() {\n    const {\n      offset,\n      lastOffset\n    } = this.state;\n    this.state.movement = [offset[0] / lastOffset[0], offset[1] - lastOffset[1]];\n  }\n  axisIntent() {\n    const state = this.state;\n    const [_m0, _m1] = state._movement;\n    if (!state.axis) {\n      const axisMovementDifference = Math.abs(_m0) * SCALE_ANGLE_RATIO_INTENT_DEG - Math.abs(_m1);\n      if (axisMovementDifference < 0) state.axis = 'angle';else if (axisMovementDifference > 0) state.axis = 'scale';\n    }\n  }\n  restrictToAxis(v) {\n    if (this.config.lockDirection) {\n      if (this.state.axis === 'scale') v[1] = 0;else if (this.state.axis === 'angle') v[0] = 0;\n    }\n  }\n  cancel() {\n    const state = this.state;\n    if (state.canceled) return;\n    setTimeout(() => {\n      state.canceled = true;\n      state._active = false;\n      this.compute();\n      this.emit();\n    }, 0);\n  }\n  touchStart(event) {\n    this.ctrl.setEventIds(event);\n    const state = this.state;\n    const ctrlTouchIds = this.ctrl.touchIds;\n    if (state._active) {\n      if (state._touchIds.every(id => ctrlTouchIds.has(id))) return;\n    }\n    if (ctrlTouchIds.size < 2) return;\n    this.start(event);\n    state._touchIds = Array.from(ctrlTouchIds).slice(0, 2);\n    const payload = touchDistanceAngle(event, state._touchIds);\n    this.pinchStart(event, payload);\n  }\n  pointerStart(event) {\n    if (event.buttons != null && event.buttons % 2 !== 1) return;\n    this.ctrl.setEventIds(event);\n    event.target.setPointerCapture(event.pointerId);\n    const state = this.state;\n    const _pointerEvents = state._pointerEvents;\n    const ctrlPointerIds = this.ctrl.pointerIds;\n    if (state._active) {\n      if (Array.from(_pointerEvents.keys()).every(id => ctrlPointerIds.has(id))) return;\n    }\n    if (_pointerEvents.size < 2) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n    if (state._pointerEvents.size < 2) return;\n    this.start(event);\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    this.pinchStart(event, payload);\n  }\n  pinchStart(event, payload) {\n    const state = this.state;\n    state.origin = payload.origin;\n    this.computeValues([payload.distance, payload.angle]);\n    this.computeInitial();\n    this.compute(event);\n    this.emit();\n  }\n  touchMove(event) {\n    if (!this.state._active) return;\n    const payload = touchDistanceAngle(event, this.state._touchIds);\n    this.pinchMove(event, payload);\n  }\n  pointerMove(event) {\n    const _pointerEvents = this.state._pointerEvents;\n    if (_pointerEvents.has(event.pointerId)) {\n      _pointerEvents.set(event.pointerId, event);\n    }\n    if (!this.state._active) return;\n    const payload = distanceAngle(...Array.from(_pointerEvents.values()));\n    this.pinchMove(event, payload);\n  }\n  pinchMove(event, payload) {\n    const state = this.state;\n    const prev_a = state._values[1];\n    const delta_a = payload.angle - prev_a;\n    let delta_turns = 0;\n    if (Math.abs(delta_a) > 270) delta_turns += Math.sign(delta_a);\n    this.computeValues([payload.distance, payload.angle - 360 * delta_turns]);\n    state.origin = payload.origin;\n    state.turns = delta_turns;\n    state._movement = [state._values[0] / state._initial[0] - 1, state._values[1] - state._initial[1]];\n    this.compute(event);\n    this.emit();\n  }\n  touchEnd(event) {\n    this.ctrl.setEventIds(event);\n    if (!this.state._active) return;\n    if (this.state._touchIds.some(id => !this.ctrl.touchIds.has(id))) {\n      this.state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n  pointerEnd(event) {\n    const state = this.state;\n    this.ctrl.setEventIds(event);\n    try {\n      event.target.releasePointerCapture(event.pointerId);\n    } catch (_unused) {}\n    if (state._pointerEvents.has(event.pointerId)) {\n      state._pointerEvents.delete(event.pointerId);\n    }\n    if (!state._active) return;\n    if (state._pointerEvents.size < 2) {\n      state._active = false;\n      this.compute(event);\n      this.emit();\n    }\n  }\n  gestureStart(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    if (state._active) return;\n    this.start(event);\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n  gestureMove(event) {\n    if (event.cancelable) event.preventDefault();\n    if (!this.state._active) return;\n    const state = this.state;\n    this.computeValues([event.scale, event.rotation]);\n    state.origin = [event.clientX, event.clientY];\n    const _previousMovement = state._movement;\n    state._movement = [event.scale - 1, event.rotation];\n    state._delta = V.sub(state._movement, _previousMovement);\n    this.compute(event);\n    this.emit();\n  }\n  gestureEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n  wheel(event) {\n    const modifierKey = this.config.modifierKey;\n    if (modifierKey && !event[modifierKey]) return;\n    if (!this.state._active) this.wheelStart(event);else this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n  wheelStart(event) {\n    this.start(event);\n    this.wheelChange(event);\n  }\n  wheelChange(event) {\n    const isR3f = ('uv' in event);\n    if (!isR3f) {\n      if (event.cancelable) {\n        event.preventDefault();\n      }\n      if (process.env.NODE_ENV === 'development' && !event.defaultPrevented) {\n        console.warn(`[@use-gesture]: To properly support zoom on trackpads, try using the \\`target\\` option.\\n\\nThis message will only appear in development mode.`);\n      }\n    }\n    const state = this.state;\n    state._delta = [-wheelValues(event)[1] / PINCH_WHEEL_RATIO * state.offset[0], 0];\n    V.addTo(state._movement, state._delta);\n    clampStateInternalMovementToBounds(state);\n    this.state.origin = [event.clientX, event.clientY];\n    this.compute(event);\n    this.emit();\n  }\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    const device = this.config.device;\n    if (!!device) {\n      bindFunction(device, 'start', this[device + 'Start'].bind(this));\n      bindFunction(device, 'change', this[device + 'Move'].bind(this));\n      bindFunction(device, 'end', this[device + 'End'].bind(this));\n      bindFunction(device, 'cancel', this[device + 'End'].bind(this));\n    }\n    if (this.config.pinchOnWheel) {\n      bindFunction('wheel', '', this.wheel.bind(this), {\n        passive: false\n      });\n    }\n  }\n}\n\nconst pinchConfigResolver = _objectSpread2(_objectSpread2({}, commonConfigResolver), {}, {\n  device(_v, _k, {\n    shared,\n    pointer: {\n      touch = false\n    } = {}\n  }) {\n    const sharedConfig = shared;\n    if (sharedConfig.target && !SUPPORT.touch && SUPPORT.gesture) return 'gesture';\n    if (SUPPORT.touch && touch) return 'touch';\n    if (SUPPORT.touchscreen) {\n      if (SUPPORT.pointer) return 'pointer';\n      if (SUPPORT.touch) return 'touch';\n    }\n  },\n  bounds(_v, _k, {\n    scaleBounds = {},\n    angleBounds = {}\n  }) {\n    const _scaleBounds = state => {\n      const D = assignDefault(call(scaleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [D.min, D.max];\n    };\n    const _angleBounds = state => {\n      const A = assignDefault(call(angleBounds, state), {\n        min: -Infinity,\n        max: Infinity\n      });\n      return [A.min, A.max];\n    };\n    if (typeof scaleBounds !== 'function' && typeof angleBounds !== 'function') return [_scaleBounds(), _angleBounds()];\n    return state => [_scaleBounds(state), _angleBounds(state)];\n  },\n  threshold(value, _k, config) {\n    this.lockDirection = config.axis === 'lock';\n    const threshold = V.toVector(value, this.lockDirection ? [0.1, 3] : 0);\n    return threshold;\n  },\n  modifierKey(value) {\n    if (value === undefined) return 'ctrlKey';\n    return value;\n  },\n  pinchOnWheel(value = true) {\n    return value;\n  }\n});\n\nclass MoveEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'moving');\n  }\n  move(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    if (!this.state._active) this.moveStart(event);else this.moveChange(event);\n    this.timeoutStore.add('moveEnd', this.moveEnd.bind(this));\n  }\n  moveStart(event) {\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.computeInitial();\n    this.emit();\n  }\n  moveChange(event) {\n    if (!this.state._active) return;\n    const values = pointerValues(event);\n    const state = this.state;\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n  moveEnd(event) {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute(event);\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('pointer', 'change', this.move.bind(this));\n    bindFunction('pointer', 'leave', this.moveEnd.bind(this));\n  }\n}\n\nconst moveConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nclass ScrollEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'scrolling');\n  }\n  scroll(event) {\n    if (!this.state._active) this.start(event);\n    this.scrollChange(event);\n    this.timeoutStore.add('scrollEnd', this.scrollEnd.bind(this));\n  }\n  scrollChange(event) {\n    if (event.cancelable) event.preventDefault();\n    const state = this.state;\n    const values = scrollValues(event);\n    state._delta = V.sub(values, state._values);\n    V.addTo(state._movement, state._delta);\n    this.computeValues(values);\n    this.compute(event);\n    this.emit();\n  }\n  scrollEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('scroll', '', this.scroll.bind(this));\n  }\n}\n\nconst scrollConfigResolver = coordinatesConfigResolver;\n\nclass WheelEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'wheeling');\n  }\n  wheel(event) {\n    if (!this.state._active) this.start(event);\n    this.wheelChange(event);\n    this.timeoutStore.add('wheelEnd', this.wheelEnd.bind(this));\n  }\n  wheelChange(event) {\n    const state = this.state;\n    state._delta = wheelValues(event);\n    V.addTo(state._movement, state._delta);\n    clampStateInternalMovementToBounds(state);\n    this.compute(event);\n    this.emit();\n  }\n  wheelEnd() {\n    if (!this.state._active) return;\n    this.state._active = false;\n    this.compute();\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('wheel', '', this.wheel.bind(this));\n  }\n}\n\nconst wheelConfigResolver = coordinatesConfigResolver;\n\nclass HoverEngine extends CoordinatesEngine {\n  constructor(...args) {\n    super(...args);\n    _defineProperty(this, \"ingKey\", 'hovering');\n  }\n  enter(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    this.start(event);\n    this.computeValues(pointerValues(event));\n    this.compute(event);\n    this.emit();\n  }\n  leave(event) {\n    if (this.config.mouseOnly && event.pointerType !== 'mouse') return;\n    const state = this.state;\n    if (!state._active) return;\n    state._active = false;\n    const values = pointerValues(event);\n    state._movement = state._delta = V.sub(values, state._values);\n    this.computeValues(values);\n    this.compute(event);\n    state.delta = state.movement;\n    this.emit();\n  }\n  bind(bindFunction) {\n    bindFunction('pointer', 'enter', this.enter.bind(this));\n    bindFunction('pointer', 'leave', this.leave.bind(this));\n  }\n}\n\nconst hoverConfigResolver = _objectSpread2(_objectSpread2({}, coordinatesConfigResolver), {}, {\n  mouseOnly: (value = true) => value\n});\n\nconst EngineMap = new Map();\nconst ConfigResolverMap = new Map();\nfunction registerAction(action) {\n  EngineMap.set(action.key, action.engine);\n  ConfigResolverMap.set(action.key, action.resolver);\n}\nconst dragAction = {\n  key: 'drag',\n  engine: DragEngine,\n  resolver: dragConfigResolver\n};\nconst hoverAction = {\n  key: 'hover',\n  engine: HoverEngine,\n  resolver: hoverConfigResolver\n};\nconst moveAction = {\n  key: 'move',\n  engine: MoveEngine,\n  resolver: moveConfigResolver\n};\nconst pinchAction = {\n  key: 'pinch',\n  engine: PinchEngine,\n  resolver: pinchConfigResolver\n};\nconst scrollAction = {\n  key: 'scroll',\n  engine: ScrollEngine,\n  resolver: scrollConfigResolver\n};\nconst wheelAction = {\n  key: 'wheel',\n  engine: WheelEngine,\n  resolver: wheelConfigResolver\n};\n\nexport { ConfigResolverMap as C, EngineMap as E, SUPPORT as S, _objectSpread2 as _, _defineProperty as a, touchIds as b, chain as c, toHandlerProp as d, dragAction as e, pinchAction as f, hoverAction as h, isTouch as i, moveAction as m, parseProp as p, registerAction as r, scrollAction as s, toDomEventType as t, wheelAction as w };\n","import { S as SUPPORT, C as ConfigResolverMap, _ as _objectSpread2, a as _defineProperty, t as toDomEventType, i as isTouch, b as touchIds, E as EngineMap, c as chain, p as parseProp, d as toHandlerProp } from './actions-b1cc53c2.esm.js';\nimport './maths-0ab39ae9.esm.js';\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n  return target;\n}\n\nconst sharedConfigResolver = {\n  target(value) {\n    if (value) {\n      return () => 'current' in value ? value.current : value;\n    }\n    return undefined;\n  },\n  enabled(value = true) {\n    return value;\n  },\n  window(value = SUPPORT.isBrowser ? window : undefined) {\n    return value;\n  },\n  eventOptions({\n    passive = true,\n    capture = false\n  } = {}) {\n    return {\n      passive,\n      capture\n    };\n  },\n  transform(value) {\n    return value;\n  }\n};\n\nconst _excluded = [\"target\", \"eventOptions\", \"window\", \"enabled\", \"transform\"];\nfunction resolveWith(config = {}, resolvers) {\n  const result = {};\n  for (const [key, resolver] of Object.entries(resolvers)) {\n    switch (typeof resolver) {\n      case 'function':\n        if (process.env.NODE_ENV === 'development') {\n          const r = resolver.call(result, config[key], key, config);\n          if (!Number.isNaN(r)) result[key] = r;\n        } else {\n          result[key] = resolver.call(result, config[key], key, config);\n        }\n        break;\n      case 'object':\n        result[key] = resolveWith(config[key], resolver);\n        break;\n      case 'boolean':\n        if (resolver) result[key] = config[key];\n        break;\n    }\n  }\n  return result;\n}\nfunction parse(newConfig, gestureKey, _config = {}) {\n  const _ref = newConfig,\n    {\n      target,\n      eventOptions,\n      window,\n      enabled,\n      transform\n    } = _ref,\n    rest = _objectWithoutProperties(_ref, _excluded);\n  _config.shared = resolveWith({\n    target,\n    eventOptions,\n    window,\n    enabled,\n    transform\n  }, sharedConfigResolver);\n  if (gestureKey) {\n    const resolver = ConfigResolverMap.get(gestureKey);\n    _config[gestureKey] = resolveWith(_objectSpread2({\n      shared: _config.shared\n    }, rest), resolver);\n  } else {\n    for (const key in rest) {\n      const resolver = ConfigResolverMap.get(key);\n      if (resolver) {\n        _config[key] = resolveWith(_objectSpread2({\n          shared: _config.shared\n        }, rest[key]), resolver);\n      } else if (process.env.NODE_ENV === 'development') {\n        if (!['drag', 'pinch', 'scroll', 'wheel', 'move', 'hover'].includes(key)) {\n          if (key === 'domTarget') {\n            throw Error(`[@use-gesture]: \\`domTarget\\` option has been renamed to \\`target\\`.`);\n          }\n          console.warn(`[@use-gesture]: Unknown config key \\`${key}\\` was used. Please read the documentation for further information.`);\n        }\n      }\n    }\n  }\n  return _config;\n}\n\nclass EventStore {\n  constructor(ctrl, gestureKey) {\n    _defineProperty(this, \"_listeners\", new Set());\n    this._ctrl = ctrl;\n    this._gestureKey = gestureKey;\n  }\n  add(element, device, action, handler, options) {\n    const listeners = this._listeners;\n    const type = toDomEventType(device, action);\n    const _options = this._gestureKey ? this._ctrl.config[this._gestureKey].eventOptions : {};\n    const eventOptions = _objectSpread2(_objectSpread2({}, _options), options);\n    element.addEventListener(type, handler, eventOptions);\n    const remove = () => {\n      element.removeEventListener(type, handler, eventOptions);\n      listeners.delete(remove);\n    };\n    listeners.add(remove);\n    return remove;\n  }\n  clean() {\n    this._listeners.forEach(remove => remove());\n    this._listeners.clear();\n  }\n}\n\nclass TimeoutStore {\n  constructor() {\n    _defineProperty(this, \"_timeouts\", new Map());\n  }\n  add(key, callback, ms = 140, ...args) {\n    this.remove(key);\n    this._timeouts.set(key, window.setTimeout(callback, ms, ...args));\n  }\n  remove(key) {\n    const timeout = this._timeouts.get(key);\n    if (timeout) window.clearTimeout(timeout);\n  }\n  clean() {\n    this._timeouts.forEach(timeout => void window.clearTimeout(timeout));\n    this._timeouts.clear();\n  }\n}\n\nclass Controller {\n  constructor(handlers) {\n    _defineProperty(this, \"gestures\", new Set());\n    _defineProperty(this, \"_targetEventStore\", new EventStore(this));\n    _defineProperty(this, \"gestureEventStores\", {});\n    _defineProperty(this, \"gestureTimeoutStores\", {});\n    _defineProperty(this, \"handlers\", {});\n    _defineProperty(this, \"config\", {});\n    _defineProperty(this, \"pointerIds\", new Set());\n    _defineProperty(this, \"touchIds\", new Set());\n    _defineProperty(this, \"state\", {\n      shared: {\n        shiftKey: false,\n        metaKey: false,\n        ctrlKey: false,\n        altKey: false\n      }\n    });\n    resolveGestures(this, handlers);\n  }\n  setEventIds(event) {\n    if (isTouch(event)) {\n      this.touchIds = new Set(touchIds(event));\n      return this.touchIds;\n    } else if ('pointerId' in event) {\n      if (event.type === 'pointerup' || event.type === 'pointercancel') this.pointerIds.delete(event.pointerId);else if (event.type === 'pointerdown') this.pointerIds.add(event.pointerId);\n      return this.pointerIds;\n    }\n  }\n  applyHandlers(handlers, nativeHandlers) {\n    this.handlers = handlers;\n    this.nativeHandlers = nativeHandlers;\n  }\n  applyConfig(config, gestureKey) {\n    this.config = parse(config, gestureKey, this.config);\n  }\n  clean() {\n    this._targetEventStore.clean();\n    for (const key of this.gestures) {\n      this.gestureEventStores[key].clean();\n      this.gestureTimeoutStores[key].clean();\n    }\n  }\n  effect() {\n    if (this.config.shared.target) this.bind();\n    return () => this._targetEventStore.clean();\n  }\n  bind(...args) {\n    const sharedConfig = this.config.shared;\n    const props = {};\n    let target;\n    if (sharedConfig.target) {\n      target = sharedConfig.target();\n      if (!target) return;\n    }\n    if (sharedConfig.enabled) {\n      for (const gestureKey of this.gestures) {\n        const gestureConfig = this.config[gestureKey];\n        const bindFunction = bindToProps(props, gestureConfig.eventOptions, !!target);\n        if (gestureConfig.enabled) {\n          const Engine = EngineMap.get(gestureKey);\n          new Engine(this, args, gestureKey).bind(bindFunction);\n        }\n      }\n      const nativeBindFunction = bindToProps(props, sharedConfig.eventOptions, !!target);\n      for (const eventKey in this.nativeHandlers) {\n        nativeBindFunction(eventKey, '', event => this.nativeHandlers[eventKey](_objectSpread2(_objectSpread2({}, this.state.shared), {}, {\n          event,\n          args\n        })), undefined, true);\n      }\n    }\n    for (const handlerProp in props) {\n      props[handlerProp] = chain(...props[handlerProp]);\n    }\n    if (!target) return props;\n    for (const handlerProp in props) {\n      const {\n        device,\n        capture,\n        passive\n      } = parseProp(handlerProp);\n      this._targetEventStore.add(target, device, '', props[handlerProp], {\n        capture,\n        passive\n      });\n    }\n  }\n}\nfunction setupGesture(ctrl, gestureKey) {\n  ctrl.gestures.add(gestureKey);\n  ctrl.gestureEventStores[gestureKey] = new EventStore(ctrl, gestureKey);\n  ctrl.gestureTimeoutStores[gestureKey] = new TimeoutStore();\n}\nfunction resolveGestures(ctrl, internalHandlers) {\n  if (internalHandlers.drag) setupGesture(ctrl, 'drag');\n  if (internalHandlers.wheel) setupGesture(ctrl, 'wheel');\n  if (internalHandlers.scroll) setupGesture(ctrl, 'scroll');\n  if (internalHandlers.move) setupGesture(ctrl, 'move');\n  if (internalHandlers.pinch) setupGesture(ctrl, 'pinch');\n  if (internalHandlers.hover) setupGesture(ctrl, 'hover');\n}\nconst bindToProps = (props, eventOptions, withPassiveOption) => (device, action, handler, options = {}, isNative = false) => {\n  var _options$capture, _options$passive;\n  const capture = (_options$capture = options.capture) !== null && _options$capture !== void 0 ? _options$capture : eventOptions.capture;\n  const passive = (_options$passive = options.passive) !== null && _options$passive !== void 0 ? _options$passive : eventOptions.passive;\n  let handlerProp = isNative ? device : toHandlerProp(device, action, capture);\n  if (withPassiveOption && passive) handlerProp += 'Passive';\n  props[handlerProp] = props[handlerProp] || [];\n  props[handlerProp].push(handler);\n};\n\nconst RE_NOT_NATIVE = /^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;\nfunction sortHandlers(_handlers) {\n  const native = {};\n  const handlers = {};\n  const actions = new Set();\n  for (let key in _handlers) {\n    if (RE_NOT_NATIVE.test(key)) {\n      actions.add(RegExp.lastMatch);\n      handlers[key] = _handlers[key];\n    } else {\n      native[key] = _handlers[key];\n    }\n  }\n  return [handlers, native, actions];\n}\nfunction registerGesture(actions, handlers, handlerKey, key, internalHandlers, config) {\n  if (!actions.has(handlerKey)) return;\n  if (!EngineMap.has(key)) {\n    if (process.env.NODE_ENV === 'development') {\n      console.warn(`[@use-gesture]: You've created a custom handler that that uses the \\`${key}\\` gesture but isn't properly configured.\\n\\nPlease add \\`${key}Action\\` when creating your handler.`);\n    }\n    return;\n  }\n  const startKey = handlerKey + 'Start';\n  const endKey = handlerKey + 'End';\n  const fn = state => {\n    let memo = undefined;\n    if (state.first && startKey in handlers) handlers[startKey](state);\n    if (handlerKey in handlers) memo = handlers[handlerKey](state);\n    if (state.last && endKey in handlers) handlers[endKey](state);\n    return memo;\n  };\n  internalHandlers[key] = fn;\n  config[key] = config[key] || {};\n}\nfunction parseMergedHandlers(mergedHandlers, mergedConfig) {\n  const [handlers, nativeHandlers, actions] = sortHandlers(mergedHandlers);\n  const internalHandlers = {};\n  registerGesture(actions, handlers, 'onDrag', 'drag', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onWheel', 'wheel', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onScroll', 'scroll', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onPinch', 'pinch', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onMove', 'move', internalHandlers, mergedConfig);\n  registerGesture(actions, handlers, 'onHover', 'hover', internalHandlers, mergedConfig);\n  return {\n    handlers: internalHandlers,\n    config: mergedConfig,\n    nativeHandlers\n  };\n}\n\nexport { Controller, parseMergedHandlers };\n","import { registerAction, dragAction, pinchAction, wheelAction, scrollAction, moveAction, hoverAction } from '@use-gesture/core/actions';\nexport * from '@use-gesture/core/actions';\nimport React from 'react';\nimport { Controller, parseMergedHandlers } from '@use-gesture/core';\nexport * from '@use-gesture/core/utils';\nexport * from '@use-gesture/core/types';\n\nfunction useRecognizers(handlers, config = {}, gestureKey, nativeHandlers) {\n  const ctrl = React.useMemo(() => new Controller(handlers), []);\n  ctrl.applyHandlers(handlers, nativeHandlers);\n  ctrl.applyConfig(config, gestureKey);\n  React.useEffect(ctrl.effect.bind(ctrl));\n  React.useEffect(() => {\n    return ctrl.clean.bind(ctrl);\n  }, []);\n  if (config.target === undefined) {\n    return ctrl.bind.bind(ctrl);\n  }\n  return undefined;\n}\n\nfunction useDrag(handler, config) {\n  registerAction(dragAction);\n  return useRecognizers({\n    drag: handler\n  }, config || {}, 'drag');\n}\n\nfunction usePinch(handler, config) {\n  registerAction(pinchAction);\n  return useRecognizers({\n    pinch: handler\n  }, config || {}, 'pinch');\n}\n\nfunction useWheel(handler, config) {\n  registerAction(wheelAction);\n  return useRecognizers({\n    wheel: handler\n  }, config || {}, 'wheel');\n}\n\nfunction useScroll(handler, config) {\n  registerAction(scrollAction);\n  return useRecognizers({\n    scroll: handler\n  }, config || {}, 'scroll');\n}\n\nfunction useMove(handler, config) {\n  registerAction(moveAction);\n  return useRecognizers({\n    move: handler\n  }, config || {}, 'move');\n}\n\nfunction useHover(handler, config) {\n  registerAction(hoverAction);\n  return useRecognizers({\n    hover: handler\n  }, config || {}, 'hover');\n}\n\nfunction createUseGesture(actions) {\n  actions.forEach(registerAction);\n  return function useGesture(_handlers, _config) {\n    const {\n      handlers,\n      nativeHandlers,\n      config\n    } = parseMergedHandlers(_handlers, _config || {});\n    return useRecognizers(handlers, config, undefined, nativeHandlers);\n  };\n}\n\nfunction useGesture(handlers, config) {\n  const hook = createUseGesture([dragAction, pinchAction, scrollAction, wheelAction, moveAction, hoverAction]);\n  return hook(handlers, config || {});\n}\n\nexport { createUseGesture, useDrag, useGesture, useHover, useMove, usePinch, useScroll, useWheel };\n"],"names":["clamp","v","min","max","V","fallback","v1","v2","rubberband","distance","dimension","constant","rubberbandIfOutOfBounds","position","computeRubberband","bounds","Vx","Vy","Rx","Ry","X0","X1","Y0","Y1","_toPrimitive","input","hint","prim","res","_toPropertyKey","arg","key","_defineProperty","obj","value","ownKeys","object","enumerableOnly","keys","symbols","sym","_objectSpread2","target","i","source","EVENT_TYPE_MAP","capitalize","string","actionsWithoutCaptureSupported","hasCapture","capture","actionKey","toHandlerProp","device","action","deviceProps","pointerCaptureEvents","parseProp","prop","eventKey","passive","captureKey","toDomEventType","isTouch","event","getPointerType","getCurrentTargetTouchList","e","_event$currentTarget","_event$currentTarget$","getTouchList","getValueEvent","distanceAngle","P1","P2","dx","dy","cx","cy","touchIds","touch","touchDistanceAngle","ids","pointerId","valueEvent","pointerValues","LINE_HEIGHT","PAGE_HEIGHT","wheelValues","deltaX","deltaY","deltaMode","scrollValues","_ref","_ref2","scrollX","scrollY","scrollLeft","scrollTop","getEventDetails","payload","shiftKey","altKey","metaKey","ctrlKey","call","args","noop","chain","fns","result","fn","assignDefault","BEFORE_LAST_KINEMATICS_DELAY","Engine","ctrl","state","shared","ingKey","config","values","dt","_absoluteDelta","_m0","_m1","t0","t1","_step","movement","v0","previousOffset","gestureIsActive","ox","oy","x0","x1","y0","y1","absoluteDelta","memo","selectAxis","threshold","absDx","absDy","CoordinatesEngine","identity","DEFAULT_RUBBERBAND","commonConfigResolver","_k","transform","DEFAULT_AXIS_THRESHOLD","coordinatesConfigResolver","_v","axis","left","right","top","bottom","KEYS_DELTA_MAP","displacement","factor","DragEngine","boundRect","targetRect","_bounds","ctrlIds","id","_values","dirx","diry","vx","vy","mx","my","svx","svy","sx","sy","sdt","persistEvent","remove","deltaFn","bindFunction","isBrowser","supportsTouchEvents","isTouchScreen","supportsPointerEvents","supportsPointerLock","supportsGestureEvents","SUPPORT","DEFAULT_PREVENT_SCROLL_DELAY","DEFAULT_DRAG_DELAY","DEFAULT_SWIPE_VELOCITY","DEFAULT_SWIPE_DISTANCE","DEFAULT_SWIPE_DURATION","DEFAULT_KEYBOARD_DISPLACEMENT","DEFAULT_DRAG_AXIS_THRESHOLD","dragConfigResolver","lock","mouse","preventScroll","buttons","filterTaps","tapsThreshold","velocity","duration","clampStateInternalMovementToBounds","SCALE_ANGLE_RATIO_INTENT_DEG","PINCH_WHEEL_RATIO","PinchEngine","type","lastOffset","offset","axisMovementDifference","ctrlTouchIds","_pointerEvents","ctrlPointerIds","prev_a","delta_a","delta_turns","_previousMovement","modifierKey","pinchConfigResolver","scaleBounds","angleBounds","_scaleBounds","D","_angleBounds","A","MoveEngine","moveConfigResolver","ScrollEngine","scrollConfigResolver","WheelEngine","wheelConfigResolver","HoverEngine","hoverConfigResolver","EngineMap","ConfigResolverMap","registerAction","dragAction","hoverAction","moveAction","pinchAction","scrollAction","wheelAction","_objectWithoutPropertiesLoose","excluded","sourceKeys","_objectWithoutProperties","sourceSymbolKeys","sharedConfigResolver","_excluded","resolveWith","resolvers","resolver","parse","newConfig","gestureKey","_config","eventOptions","window","enabled","rest","EventStore","element","handler","options","listeners","_options","TimeoutStore","callback","ms","timeout","Controller","handlers","resolveGestures","nativeHandlers","sharedConfig","props","gestureConfig","bindToProps","nativeBindFunction","handlerProp","setupGesture","internalHandlers","withPassiveOption","isNative","_options$capture","_options$passive","RE_NOT_NATIVE","sortHandlers","_handlers","native","actions","registerGesture","handlerKey","startKey","endKey","parseMergedHandlers","mergedHandlers","mergedConfig","useRecognizers","React","useDrag","useWheel","useScroll","useMove","createUseGesture","useGesture"],"mappings":"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"}