{"version":3,"file":"_.story-c6b2e1dd.js","sources":["../../src/components/spring/NavBar/index.tsx","../../src/components/spring/NavBar/_.story.tsx"],"sourcesContent":["import { useState, useMemo } from 'react'\r\nimport useMeasure from 'react-use-measure'\r\n\r\nimport { useTransition, animated, useSpring } from '@react-spring/web'\r\n\r\nimport classes from './_classes.css'\r\n\r\nexport interface NavBarProps {\r\n  items: NavBarItem[]\r\n  popoverWidth?: number\r\n}\r\n\r\nexport interface NavBarItem {\r\n  title: string\r\n  content: JSX.Element\r\n}\r\n\r\nconst transform = (index: number, width: number, popoverWidth: number) =>\r\n  `translateX(${width * index - (popoverWidth - width) / 2}px)`\r\n\r\nexport const NavBar = (props: NavBarProps) => {\r\n  const { items, popoverWidth = 300 } = props\r\n  const [active, setActive] = useState(0)\r\n  const [isOpen, setIsOpen] = useState(false)\r\n\r\n  const [ref, { width }] = useMeasure()\r\n  const [contentRef, { height }] = useMeasure()\r\n\r\n  const itemWidth = useMemo(() => width / items.length, [width, items.length])\r\n\r\n  const contentSpring = useSpring({\r\n    height: isOpen ? height : 0,\r\n    x: active,\r\n  })\r\n\r\n  const transitions = useTransition([items[active]], {\r\n    from: {\r\n      opacity: 0,\r\n      position: 'relative' as const,\r\n      width: '100%',\r\n    },\r\n    enter: {\r\n      opacity: 1,\r\n      position: 'relative' as const,\r\n      width: '100%',\r\n    },\r\n    leave: {\r\n      opacity: 0,\r\n      position: 'absolute' as const,\r\n      width: '100%',\r\n    },\r\n    keys: (item) => item.title,\r\n    unique: true,\r\n  })\r\n\r\n  const renderContent = () =>\r\n    transitions((props, item, _, key) => (\r\n      <animated.div key={item.title} style={{ ...props, left: 0 }}>\r\n        {item.content}\r\n      </animated.div>\r\n    ))\r\n\r\n  const renderItems = () =>\r\n    items.map((item, index) => (\r\n      <div\r\n        className={classes.item}\r\n        key={item.title}\r\n        onMouseEnter={() => setActive(index)}\r\n      >\r\n        {item.title}\r\n      </div>\r\n    ))\r\n\r\n  return (\r\n    <nav\r\n      className={classes.nav}\r\n      onMouseEnter={() => setIsOpen(true)}\r\n      onMouseLeave={() => setIsOpen(false)}\r\n      ref={ref}\r\n    >\r\n      {renderItems()}\r\n\r\n      <animated.div\r\n        className={classes.popover}\r\n        style={{\r\n          width: popoverWidth,\r\n          height: contentSpring.height,\r\n          transform: contentSpring.x.to((val) =>\r\n            transform(val, itemWidth, popoverWidth)\r\n          ),\r\n        }}\r\n      >\r\n        <div ref={contentRef}>{renderContent()}</div>\r\n      </animated.div>\r\n    </nav>\r\n  )\r\n}\r\n","import { ComponentStory, ComponentMeta } from '@storybook/react';\nimport { withCenteredStyle } from '~/_storybook/withCenteredStyle';\nimport { withCustomTheme } from '~/_storybook/withCustomTheme';\nimport { NavBar, NavBarItem } from '.';\nconst items: NavBarItem[] = [{\n  title: 'Hello',\n  content: <div style={{\n    height: 300,\n    backgroundColor: 'green'\n  }} />\n}, {\n  title: 'World',\n  content: <div style={{\n    height: 200,\n    backgroundColor: 'orange'\n  }} />\n}, {\n  title: 'Omg',\n  content: <div style={{\n    height: 100,\n    backgroundColor: 'red'\n  }} />\n}, {\n  title: 'There',\n  content: <div style={{\n    height: 150,\n    backgroundColor: 'blue'\n  }} />\n}, {\n  title: 'Hi',\n  content: <div style={{\n    height: 250,\n    backgroundColor: 'teal'\n  }} />\n}];\nexport default ({\n  title: 'Spring/NavBar with menu',\n  decorators: [withCenteredStyle({\n    width: 'auto',\n    minWidth: 1000,\n    minHeight: '80vh',\n    alignItems: 'flex-start'\n  }), withCustomTheme]\n} as ComponentMeta<typeof NavBar>);\nconst Template1: ComponentStory<typeof NavBar> = props => <NavBar {...props} />;\nexport const _NavBar = Template1.bind({});\n_NavBar.argTypes = {\n  popoverWidth: {\n    control: {\n      type: 'number',\n      min: 0,\n      step: 1\n    }\n  }\n};\n_NavBar.args = {\n  popoverWidth: 300,\n  items\n};\n_NavBar.parameters = {\n  controls: {\n    include: ['popoverWidth']\n  }\n};\n_NavBar.parameters = {\n  ..._NavBar.parameters,\n  storySource: {\n    source: \"props => <NavBar {...props} />\",\n    ..._NavBar.parameters?.storySource\n  }\n};"],"names":["transform","index","width","popoverWidth","NavBar","props","items","active","setActive","useState","isOpen","setIsOpen","ref","useMeasure","contentRef","height","itemWidth","useMemo","contentSpring","useSpring","transitions","useTransition","item","renderContent","props2","_","key","jsx","animated","renderItems","classes","jsxs","val","__story","withCenteredStyle","withCustomTheme","Template1","_NavBar","_a"],"mappings":"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"}