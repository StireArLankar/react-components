{"version":3,"file":"_.story-bf18fa2d.js","sources":["../../src/components/framer/CubicBezier/index.tsx","../../src/components/framer/CubicBezier/_.story.tsx"],"sourcesContent":["import { useRef, useEffect, useCallback, memo } from 'react'\r\n\r\nimport { motion, useMotionValue, MotionValue } from 'framer-motion'\r\n\r\nimport classes from './_classes.css'\r\n\r\nconst t = (val: MotionValue<number>) => val.get().toFixed(0)\r\n\r\nconst constraints1 = { left: 0, top: 0, right: 500, bottom: 500 }\r\nconst constraints2 = { left: -100, top: -100, right: 600, bottom: 600 }\r\n\r\nexport default memo(() => {\r\n  const constraintsRef1 = useRef(null)\r\n  const constraintsRef2 = useRef(null)\r\n\r\n  const x1 = useMotionValue(0)\r\n  const y1 = useMotionValue(500)\r\n\r\n  const x2 = useMotionValue(100)\r\n  const y2 = useMotionValue(400)\r\n\r\n  const x3 = useMotionValue(400)\r\n  const y3 = useMotionValue(100)\r\n\r\n  const x4 = useMotionValue(500)\r\n  const y4 = useMotionValue(0)\r\n\r\n  const path = useMotionValue(``)\r\n  const path1 = useMotionValue(``)\r\n  const path2 = useMotionValue(``)\r\n\r\n  const _content = useRef<HTMLDivElement>(null)\r\n\r\n  const updatePath = useCallback(() => {\r\n    const newPath = `M${x1.get()},${y1.get()} C${x2.get()},${y2.get()} ${x3.get()},${y3.get()} ${x4.get()},${y4.get()}`\r\n    path.set(newPath)\r\n    _content.current!.innerText = `M${t(x1)},${t(y1)} C${t(x2)},${t(y2)} ${t(\r\n      x3\r\n    )},${t(y3)} ${t(x4)},${t(y4)}`\r\n  }, [path, x1, x2, x3, x4, y1, y2, y3, y4])\r\n\r\n  const updatePath1 = useCallback(() => {\r\n    const newPath = `M${x1.get()},${y1.get()} L${x2.get()},${y2.get()}`\r\n    path1.set(newPath)\r\n  }, [path1, x1, x2, y1, y2])\r\n\r\n  const updatePath2 = useCallback(() => {\r\n    const newPath = `M${x4.get()},${y4.get()} L${x3.get()},${y3.get()}`\r\n    path2.set(newPath)\r\n  }, [path2, x3, x4, y3, y4])\r\n\r\n  useEffect(() => {\r\n    updatePath()\r\n    updatePath1()\r\n    updatePath2()\r\n  }, [updatePath, updatePath1, updatePath2])\r\n\r\n  const renderPoint = (\r\n    update: () => void,\r\n    x: MotionValue<number>,\r\n    y: MotionValue<number>,\r\n    inner?: boolean\r\n  ) => (\r\n    <motion.circle\r\n      onUpdate={() => {\r\n        update()\r\n        updatePath()\r\n      }}\r\n      cx={0}\r\n      cy={0}\r\n      r={10}\r\n      style={{ x, y }}\r\n      drag\r\n      dragMomentum={false}\r\n      dragElastic={0.1}\r\n      // dragConstraints={inner ? constraintsRef1 : constraintsRef2}\r\n      dragConstraints={inner ? constraints1 : constraints2}\r\n      stroke='none'\r\n      fill='red'\r\n    />\r\n  )\r\n\r\n  return (\r\n    <div className={classes.wrapper}>\r\n      <motion.div ref={_content} className={classes.content} />\r\n\r\n      <div className={classes.constrains} ref={constraintsRef1} />\r\n\r\n      <svg\r\n        viewBox='-100 -100 700 700'\r\n        className={classes.svg}\r\n        ref={constraintsRef2}\r\n        fill='none'\r\n      >\r\n        <motion.path d={path} stroke='black' strokeWidth='1' />\r\n        <motion.path d={path1} stroke='blue' strokeWidth='1' />\r\n        <motion.path d={path2} stroke='blue' strokeWidth='1' />\r\n        {renderPoint(updatePath1, x1, y1, true)}\r\n        {renderPoint(updatePath1, x2, y2)}\r\n        {renderPoint(updatePath2, x3, y3)}\r\n        {renderPoint(updatePath2, x4, y4, true)}\r\n      </svg>\r\n    </div>\r\n  )\r\n})\r\n","import type { Meta, StoryObj } from '@storybook/react';\nimport { withCenteredStyle } from '~/_storybook/withCenteredStyle';\nimport { withCustomTheme } from '~/_storybook/withCustomTheme';\nimport Component from '.';\nconst meta = ({\n  title: 'Framer Motion/Cubic Bezier',\n  component: Component,\n  decorators: [withCustomTheme, withCenteredStyle({\n    width: '100%'\n  })]\n} satisfies Meta<typeof Component>);\nexport default meta;\ntype Story = StoryObj<typeof meta>;\nexport const CubicBezier: Story = {};\nCubicBezier.parameters = {\n  ...CubicBezier.parameters,\n  storySource: {\n    source: \"{}\",\n    ...CubicBezier.parameters?.storySource\n  }\n};"],"names":["t","val","constraints1","constraints2","memo","constraintsRef1","useRef","constraintsRef2","x1","useMotionValue","y1","x2","y2","x3","y3","x4","y4","path","path1","path2","_content","updatePath","useCallback","newPath","updatePath1","updatePath2","useEffect","renderPoint","update","x","y","inner","jsx","motion","jsxs","classes","meta","Component","withCustomTheme","withCenteredStyle","CubicBezier"],"mappings":"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"}