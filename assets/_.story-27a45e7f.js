import{j as e,w as k}from"./withCustomTheme-ab58be2d.js";import{w as D}from"./withCenteredStyle-93f62c3f.js";import{r as i}from"./index-f1f749bf.js";import{u as E}from"./useBgColor-6afa340b.js";import"./story.css-e50b5b1c.js";import"./_commonjsHelpers-042e6b4d.js";const U="_wrapper_hjw9q_1",R="_canvas_hjw9q_11",A="_square_hjw9q_15",T="_left_hjw9q_21",L="_right_hjw9q_29",M="_colorWrapper_hjw9q_36",z="_text_hjw9q_48",H="_labelWrapper_hjw9q_54",B="_label_hjw9q_54",P="_input_hjw9q_73",s={wrapper:U,canvas:R,square:A,left:T,right:L,colorWrapper:M,text:z,labelWrapper:H,label:B,input:P},u=o=>{const{color:c}=o,j=(m,_,h)=>{if(m>255||_>255||h>255)throw new Error("Invalid color component");return"#"+("000000"+(m<<16|_<<8|h).toString(16)).slice(-6)};return e.jsxs("div",{className:s.colorWrapper,children:[e.jsx("span",{style:{backgroundColor:`rgb(${c.toString()})`},className:s.square}),e.jsxs("span",{className:s.text,children:["Rgb: ",c.slice(0,3).toString()]}),e.jsxs("span",{className:s.text,children:["Hex: ",j(...c)]})]})};try{u.displayName="ColorDisplay",u.__docgenInfo={description:"",displayName:"ColorDisplay",props:{color:{defaultValue:null,description:"",name:"color",required:!0,type:{name:"[number, number, number]"}}}}}catch{}const x=o=>{const{onFileUpload:c}=o;return e.jsxs("label",{className:s.labelWrapper,children:[e.jsx("input",{type:"file",accept:"image/*",onChange:c,className:s.input}),e.jsx("span",{className:s.label,children:"Выберите изображение"})]})};try{x.displayName="FileInput",x.__docgenInfo={description:"",displayName:"FileInput",props:{onFileUpload:{defaultValue:null,description:"",name:"onFileUpload",required:!0,type:{name:"(evt: ChangeEvent<HTMLInputElement>) => void"}}}}}catch{}const V=()=>{const[o,c]=i.useState([0,0,0]),[j,m]=i.useState([0,0,0]),[_,h]=i.useState(!1),[w,q]=i.useState({width:0,height:0}),p=i.useRef(null);E(210,208,233);const N=(a,t)=>{const r=a.getBoundingClientRect(),n=r.x,l=r.y+document.documentElement.scrollTop;return{x:t.pageX-n,y:t.pageY-l}},S=a=>{const{width:t,height:r}=a;return t>r&&t>500?[500,500*r/t]:r>t&&r>500?[500*t/r,500]:[t,r]},F=a=>{var t=new Image;t.onload=()=>{var l,d;const[r,n]=S(t);q({width:r,height:n}),(d=(l=p.current)==null?void 0:l.getContext("2d"))==null||d.drawImage(t,0,0,r,n)},t.setAttribute("src",a)},f=a=>{const t=a==="move"?c:m;return r=>{if(p.current){const n=N(p.current,r),l=p.current.getContext("2d"),d=l==null?void 0:l.getImageData(n.x,n.y,1,1).data;if(d){const W=Array.from(d);t(W)}}}},C=a=>{const t=a.target.files[0],r=new FileReader;r.onload=()=>{const n=r.result;h(!0),F(n)},r.readAsDataURL(t)},I=()=>e.jsxs(i.Fragment,{children:[e.jsx("div",{className:s.left,children:e.jsx("canvas",{width:w.width,height:w.height,onMouseMove:f("move"),onClick:f("click"),ref:p,className:s.canvas})}),e.jsxs("div",{className:s.right,children:[e.jsx(u,{color:o}),e.jsx(u,{color:j})]}),e.jsx(x,{onFileUpload:C})]});return e.jsx("div",{className:s.wrapper,children:_?I():e.jsx(x,{onFileUpload:C})})},Z={title:"Native/Color Picker",decorators:[D({width:"100%",padding:20}),k]},y=()=>e.jsx(V,{}),G=o=>e.jsx(u,{color:[o.red,o.green,o.blue]}),X=o=>e.jsx(G,{...o}),g=X.bind({});g.args={red:0,green:0,blue:0};var v;y.parameters={...y.parameters,storySource:{source:"() => <Color />",...(v=y.parameters)==null?void 0:v.storySource}};var b;g.parameters={...g.parameters,storySource:{source:"props => <Asd {...props} />",...(b=g.parameters)==null?void 0:b.storySource}};export{y as ColorPicker,g as Display,Z as default};
//# sourceMappingURL=_.story-27a45e7f.js.map
