{"version":3,"file":"_.story-7be28494.js","sources":["../../src/components/spring/Bubbles/BubbleSvg.tsx","../../src/components/spring/Bubbles/index.tsx","../../src/components/spring/Bubbles/_.story.tsx"],"sourcesContent":["import classes from './_classes.css'\r\n\r\nexport type BubbleSvgProps = {\r\n  onClick: () => void\r\n}\r\n\r\nexport const BubbleSvg = (props: BubbleSvgProps) => {\r\n  const { onClick } = props\r\n\r\n  return (\r\n    <svg viewBox='0 0 200 200' onClick={onClick} className={classes.bubble}>\r\n      <defs>\r\n        {/* <!-- Разноцветный градиент --> */}\r\n        <linearGradient id='gradient--colors' x1='0' y1='100%' x2='100%' y2='0'>\r\n          <stop offset='0%' stopColor='dodgerblue' />\r\n          <stop offset='50%' stopColor='fuchsia' />\r\n          <stop offset='100%' stopColor='yellow' />\r\n        </linearGradient>\r\n\r\n        {/* <!-- Градиент прозрачности разноцветного слоя --> */}\r\n        <radialGradient id='gradient--colors-transparency' fx='25%' fy='25%'>\r\n          <stop offset='0%' stopColor='black' />\r\n          <stop offset='30%' stopColor='black' stopOpacity='.2' />\r\n          <stop offset='97%' stopColor='white' stopOpacity='.4' />\r\n          <stop offset='100%' stopColor='black' />\r\n        </radialGradient>\r\n\r\n        {/* <!-- Маска прозрачности разноцветного слоя --> */}\r\n        <mask id='mask--colors-transparency'>\r\n          <rect\r\n            fill='url(#gradient--colors-transparency)'\r\n            width='100%'\r\n            height='100%'\r\n          />\r\n        </mask>\r\n\r\n        {/* <!-- Градиент для прозрачности --> */}\r\n        <radialGradient id='gradient--bw-light' fy='10%'>\r\n          <stop offset='60%' stopColor='black' stopOpacity='0' />\r\n          <stop offset='90%' stopColor='white' stopOpacity='.25' />\r\n          <stop offset='100%' stopColor='black' />\r\n        </radialGradient>\r\n\r\n        {/* <!-- Маска для нижнего отражения --> */}\r\n        <mask id='mask--light-bottom'>\r\n          <rect fill='url(#gradient--bw-light)' width='100%' height='100%' />\r\n        </mask>\r\n\r\n        {/* <!-- Маска для верхнего отражения --> */}\r\n        <mask id='mask--light-top'>\r\n          <rect\r\n            fill='url(#gradient--bw-light)'\r\n            width='100%'\r\n            height='100%'\r\n            transform='rotate(180, 100, 100)'\r\n          />\r\n        </mask>\r\n\r\n        {/* <!-- Градиент блика --> */}\r\n        <radialGradient id='gradient--spot' fy='20%'>\r\n          <stop offset='10%' stopColor='white' stopOpacity='.7' />\r\n          <stop offset='70%' stopColor='white' stopOpacity='0' />\r\n        </radialGradient>\r\n      </defs>\r\n\r\n      {/* <!-- Нижний блик --> */}\r\n      <ellipse\r\n        rx='40'\r\n        ry='20'\r\n        cx='150'\r\n        cy='150'\r\n        fill='url(#gradient--spot)'\r\n        transform='rotate(-225, 150, 150)'\r\n      />\r\n\r\n      {/* <!-- Нижнее отражение --> */}\r\n      <circle\r\n        r='50%'\r\n        cx='50%'\r\n        cy='50%'\r\n        fill='aqua'\r\n        mask='url(#mask--light-bottom)'\r\n      />\r\n\r\n      {/* <!-- Верхнее отражение --> */}\r\n      <circle\r\n        r='50%'\r\n        cx='50%'\r\n        cy='50%'\r\n        fill='yellow'\r\n        mask='url(#mask--light-top)'\r\n      />\r\n\r\n      {/* <!-- Верхний блик --> */}\r\n      <ellipse\r\n        rx='55'\r\n        ry='25'\r\n        cx='55'\r\n        cy='55'\r\n        fill='url(#gradient--spot)'\r\n        transform='rotate(-45, 55, 55)'\r\n      />\r\n\r\n      {/* <!-- Фигура с маской и разноцветным градиентом --> */}\r\n      <circle\r\n        r='50%'\r\n        cx='50%'\r\n        cy='50%'\r\n        fill='url(#gradient--colors)'\r\n        mask='url(#mask--colors-transparency)'\r\n      />\r\n    </svg>\r\n  )\r\n}\r\n","import { useState } from 'react'\r\n\r\nimport { useTransition, animated, useSpring } from '@react-spring/web'\r\n\r\nimport classes from './_classes.css'\r\nimport { BubbleSvg } from './BubbleSvg'\r\n\r\nconst initiaItems = [0, 1, 2, 3, 4, 5, 6, 7, 8]\r\n\r\nconst transf = (y: number, index: number) => {\r\n  const value = y * 2 * Math.PI * 15 + (2 * Math.PI * index) / 8\r\n  return `translate(0, ${Math.sin(value) * 100}px)`\r\n}\r\n\r\nexport const Bubbles = () => {\r\n  const [items, setItems] = useState([...initiaItems])\r\n  const [counter, setCounter] = useState(1)\r\n\r\n  const destroyBubble = (index: number) => () =>\r\n    setItems((prev) => prev.filter((item) => item !== index))\r\n\r\n  const transitions = useTransition(items, {\r\n    initial: { width: 100, opacity: 1 },\r\n    enter: { width: 100, opacity: 1 },\r\n    from: { width: 0, opacity: 0 },\r\n    leave: { width: 0, opacity: 0 },\r\n    unique: true,\r\n  })\r\n\r\n  const spring = useSpring({\r\n    x: counter,\r\n    from: { x: 0 },\r\n    config: { duration: 30000 },\r\n    immediate: counter === 0,\r\n    onRest: () => setCounter(counter > 1000 ? 0 : counter + 1),\r\n  })\r\n\r\n  return (\r\n    <ul className={classes.list}>\r\n      {transitions((props, item, _, key) => (\r\n        <animated.li key={key} className={classes.item} style={props}>\r\n          <animated.div\r\n            className={classes.item}\r\n            style={{\r\n              transform: spring.x.to((val) => transf(val, item)),\r\n            }}\r\n          >\r\n            <BubbleSvg onClick={destroyBubble(item)} />\r\n          </animated.div>\r\n        </animated.li>\r\n      ))}\r\n    </ul>\r\n  )\r\n}\r\n","import { withCenteredStyle } from '~/_storybook/withCenteredStyle';\nimport { withCustomTheme } from '~/_storybook/withCustomTheme';\nimport { Bubbles } from '.';\nexport default {\n  title: 'Spring/Bubbles',\n  decorators: [withCenteredStyle({\n    width: '100%'\n  }), withCustomTheme]\n};\nexport const _Bubbles = () => <Bubbles />;\n_Bubbles.parameters = {\n  ..._Bubbles.parameters,\n  storySource: {\n    source: \"() => <Bubbles />\",\n    ..._Bubbles.parameters?.storySource\n  }\n};"],"names":["BubbleSvg","props","onClick","jsxs","classes","jsx","initiaItems","transf","y","index","value","Bubbles","items","setItems","useState","counter","setCounter","destroyBubble","prev","item","transitions","useTransition","spring","useSpring","_","key","animated","val","__story","withCenteredStyle","withCustomTheme","_Bubbles","_a"],"mappings":"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"}