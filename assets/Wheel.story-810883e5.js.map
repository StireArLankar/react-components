{"version":3,"file":"Wheel.story-810883e5.js","sources":["../../src/components/gesture/Wheel/path.ts","../../src/components/gesture/Wheel/Wheel.tsx","../../src/components/gesture/Wheel/Wheel.story.tsx"],"sourcesContent":["export default 'M30,0C13.458,0,0,13.458,0,30s13.458,30,30,30s30-13.458,30-30S46.542,0,30,0z M50.236,42.907  c-0.208,0.325-0.424,0.644-0.648,0.959c-0.032,0.045-0.063,0.091-0.096,0.136c-0.214,0.298-0.437,0.589-0.664,0.877  c-0.045,0.057-0.088,0.115-0.134,0.171c-0.221,0.274-0.45,0.541-0.683,0.805c-0.054,0.062-0.106,0.125-0.161,0.187  c-0.285,0.317-0.578,0.628-0.88,0.929c-0.303,0.302-0.614,0.596-0.932,0.882c-0.056,0.05-0.114,0.097-0.17,0.147  c-0.27,0.238-0.544,0.473-0.824,0.699c-0.051,0.041-0.103,0.08-0.154,0.12c-0.293,0.232-0.591,0.459-0.895,0.678  c-0.04,0.029-0.081,0.057-0.122,0.086c-0.318,0.226-0.641,0.445-0.97,0.655c-0.016,0.01-0.032,0.02-0.048,0.03l-8.026-13.899  c0.02-0.015,0.037-0.035,0.058-0.05c0.535-0.415,1.015-0.895,1.43-1.43c0.016-0.02,0.035-0.037,0.05-0.058l13.899,8.026  C50.257,42.873,50.247,42.89,50.236,42.907z M9.769,17.086c0.204-0.318,0.416-0.63,0.634-0.938c0.037-0.052,0.073-0.105,0.111-0.157  c0.208-0.289,0.424-0.571,0.645-0.851c0.051-0.065,0.101-0.131,0.153-0.196c0.213-0.264,0.434-0.522,0.659-0.777  c0.062-0.07,0.121-0.143,0.183-0.213c0.284-0.316,0.576-0.625,0.876-0.925c0.302-0.302,0.612-0.594,0.929-0.88  c0.062-0.056,0.126-0.108,0.188-0.163c0.263-0.232,0.53-0.461,0.803-0.681c0.057-0.046,0.116-0.09,0.174-0.136  c0.287-0.227,0.579-0.45,0.876-0.664c0.043-0.031,0.087-0.061,0.131-0.092c0.319-0.226,0.642-0.445,0.972-0.656  c0.014-0.009,0.027-0.017,0.041-0.026l8.025,13.899c-0.02,0.015-0.037,0.035-0.058,0.05c-0.535,0.415-1.015,0.895-1.43,1.43  c-0.016,0.02-0.035,0.037-0.05,0.058L9.733,17.144C9.745,17.125,9.757,17.106,9.769,17.086z M36.318,25.111  c-0.415-0.535-0.895-1.015-1.43-1.43c-0.02-0.016-0.037-0.035-0.058-0.05l8.017-13.885c2.977,1.895,5.511,4.429,7.406,7.406  l-13.885,8.017C36.353,25.149,36.334,25.132,36.318,25.111z M25.169,36.369l-8.018,13.886c-2.977-1.895-5.511-4.429-7.406-7.406  l13.886-8.018c0.015,0.02,0.035,0.037,0.05,0.058c0.415,0.535,0.895,1.015,1.43,1.43C25.132,36.334,25.149,36.353,25.169,36.369z   M35,30c0,2.758-2.242,5-5,5s-5-2.242-5-5s2.242-5,5-5S35,27.242,35,30z M33.102,22.627c-0.66-0.279-1.367-0.465-2.102-0.557V6.025  c3.578,0.146,7.018,1.076,10.123,2.709L33.102,22.627z M29,22.069c-0.736,0.092-1.443,0.278-2.102,0.557l-8.025-13.9  C21.977,7.098,25.418,6.171,29,6.025V22.069z M22.627,26.898c-0.279,0.66-0.465,1.367-0.557,2.102H6.024  c0.146-3.582,1.074-7.023,2.703-10.127L22.627,26.898z M22.069,31c0.092,0.735,0.278,1.442,0.557,2.102L8.733,41.124  C7.101,38.018,6.171,34.578,6.024,31H22.069z M26.898,37.374c0.66,0.279,1.367,0.465,2.102,0.557v16.045  c-3.578-0.146-7.018-1.076-10.124-2.709L26.898,37.374z M31,37.931c0.736-0.092,1.443-0.278,2.102-0.557l8.025,13.9  C38.023,52.902,34.582,53.83,31,53.976V37.931z M37.373,33.102c0.279-0.66,0.465-1.367,0.557-2.102h16.045  c-0.146,3.582-1.073,7.023-2.702,10.128L37.373,33.102z M37.931,29c-0.092-0.736-0.278-1.442-0.557-2.102l13.893-8.021  c1.632,3.105,2.562,6.545,2.709,10.123H37.931z'\r\n","import useMeasure from 'react-use-measure'\r\n\r\nimport { useSpring, animated } from '@react-spring/web'\r\nimport { useDrag } from '@use-gesture/react'\r\n\r\nimport clamp from '~/utils/clamp'\r\n\r\nimport classes from './classes.css'\r\nimport path from './path'\r\n\r\nconst constrains = (val: number, max: number) =>\r\n  val > 0 ? Math.min(val, max) : Math.max(val, -max)\r\n\r\nconst circleQuarter = (Math.PI * 120) / 2\r\n\r\n// 180 * x / PI * R = path\r\nconst alpha = 180 / (120 * Math.PI)\r\n\r\nconst rotZ = (x: number) => `rotateZ(${alpha * x}deg)`\r\n\r\nconst scaleY = (x: number, i: number, width: number, amount: number) => {\r\n  const wid = width / amount\r\n  // [-w/2 ... + w/2]\r\n  const positive = x + width / 2\r\n  // [0 .... w]\r\n  const itemValue = positive - i * wid\r\n  // [0 ... w / n]\r\n\r\n  const val = clamp(itemValue / wid, 0, 1)\r\n\r\n  // return `scale3d(1, ${val}, 1)`\r\n  return `translate3d(0, ${(1 - val) * 101}%, 0)`\r\n}\r\n\r\nexport const Wheel = () => {\r\n  const [ref, { width }] = useMeasure({ debounce: 100 })\r\n\r\n  const [{ x }, spring] = useSpring(() => ({ x: 0 }))\r\n\r\n  const bind = useDrag(\r\n    ({ down, offset: [x], velocity: [vx], tap, direction: [dx] }) => {\r\n      switch (true) {\r\n        case tap:\r\n          spring.start({ x: constrains(x + circleQuarter, width / 2) })\r\n          break\r\n\r\n        case down:\r\n          spring.start({ x })\r\n          break\r\n\r\n        default:\r\n          spring.start({ x: constrains(x + dx * vx * 100, width / 2) })\r\n          break\r\n      }\r\n    },\r\n    {\r\n      from: () => [x.get(), 0],\r\n      bounds: { right: width / 2, left: -width / 2 },\r\n      rubberband: 0.4,\r\n      axis: 'x',\r\n      filterTaps: true,\r\n    }\r\n  )\r\n\r\n  const renderItems = () =>\r\n    Array.from({ length: Math.floor(width / 40) }, (_, i) => (\r\n      <animated.li\r\n        key={i}\r\n        className={classes.item}\r\n        style={{\r\n          transform: x.to((x) => scaleY(x, i, width, Math.floor(width / 40))),\r\n        }}\r\n      />\r\n    ))\r\n\r\n  return (\r\n    <>\r\n      <animated.div className={classes.wheel} {...bind()} style={{ x }}>\r\n        <animated.svg\r\n          className={classes.svg}\r\n          style={{ transform: x.to(rotZ) }}\r\n          viewBox='0 0 60 60'\r\n        >\r\n          <path fill='currentColor' d={path} />\r\n        </animated.svg>\r\n      </animated.div>\r\n\r\n      <ul className={classes.list} ref={ref}>\r\n        {renderItems()}\r\n      </ul>\r\n    </>\r\n  )\r\n}\r\n\r\nexport default Wheel\r\n","import { Meta, StoryObj } from '@storybook/react';\nimport { withCenteredStyle } from '~/_storybook/withCenteredStyle';\nimport { withCustomTheme } from '~/_storybook/withCustomTheme';\nimport Component from './Wheel';\nconst meta = ({\n  title: 'Gesture/Wheel',\n  component: Component,\n  decorators: [withCenteredStyle({\n    width: '100%'\n  }), withCustomTheme]\n} satisfies Meta<typeof Component>);\nexport default meta;\ntype Story = StoryObj<typeof meta>;\nexport const Wheel: Story = {};\nWheel.parameters = {\n  ...Wheel.parameters,\n  storySource: {\n    source: \"{}\",\n    ...Wheel.parameters?.storySource\n  }\n};"],"names":["path","constrains","val","max","circleQuarter","alpha","rotZ","x","scaleY","i","width","amount","wid","itemValue","clamp","Wheel","ref","useMeasure","spring","useSpring","bind","useDrag","down","vx","tap","dx","renderItems","_","jsx","animated","classes","jsxs","Fragment","meta","Component","withCenteredStyle","withCustomTheme","_a"],"mappings":"8fAAAA,EAAe,+zFCUTC,EAAa,CAACC,EAAaC,IAC/BD,EAAM,EAAI,KAAK,IAAIA,EAAKC,CAAG,EAAI,KAAK,IAAID,EAAK,CAACC,CAAG,EAE7CC,EAAiB,KAAK,GAAK,IAAO,EAGlCC,EAAQ,KAAO,IAAM,KAAK,IAE1BC,EAAQC,GAAc,WAAWF,EAAQE,QAEzCC,EAAS,CAACD,EAAWE,EAAWC,EAAeC,IAAmB,CACtE,MAAMC,EAAMF,EAAQC,EAIdE,EAFWN,EAAIG,EAAQ,EAEAD,EAAIG,EAM1B,MAAA,mBAAmB,EAHdE,EAAMD,EAAYD,EAAK,EAAG,CAAC,GAGF,UACvC,EAEaG,EAAQ,IAAM,CACnB,KAAA,CAACC,EAAK,CAAE,MAAAN,CAAO,CAAA,EAAIO,EAAW,CAAE,SAAU,GAAA,CAAK,EAE/C,CAAC,CAAE,EAAAV,CAAK,EAAAW,CAAM,EAAIC,EAAU,KAAO,CAAE,EAAG,CAAI,EAAA,EAE5CC,EAAOC,EACX,CAAC,CAAE,KAAAC,EAAM,OAAQ,CAACf,CAAC,EAAG,SAAU,CAACgB,CAAE,EAAG,IAAAC,EAAK,UAAW,CAACC,CAAE,KAAQ,CAC/D,OAAQ,GAAM,CACZ,KAAKD,EACIN,EAAA,MAAM,CAAE,EAAGjB,EAAWM,EAAIH,EAAeM,EAAQ,CAAC,CAAA,CAAG,EAC5D,MAEF,KAAKY,EACHJ,EAAO,MAAM,CAAE,EAAAX,CAAG,CAAA,EAClB,MAEF,QACSW,EAAA,MAAM,CAAE,EAAGjB,EAAWM,EAAIkB,EAAKF,EAAK,IAAKb,EAAQ,CAAC,CAAG,CAAA,EAC5D,KACJ,CACF,EACA,CACE,KAAM,IAAM,CAACH,EAAE,IAAA,EAAO,CAAC,EACvB,OAAQ,CAAE,MAAOG,EAAQ,EAAG,KAAM,CAACA,EAAQ,CAAE,EAC7C,WAAY,GACZ,KAAM,IACN,WAAY,EACd,CAAA,EAGIgB,EAAc,IAClB,MAAM,KAAK,CAAE,OAAQ,KAAK,MAAMhB,EAAQ,EAAE,CAAA,EAAK,CAACiB,EAAGlB,IACjDmB,EAAA,IAACC,EAAS,GAAT,CAEC,UAAWC,EAAQ,KACnB,MAAO,CACL,UAAWvB,EAAE,GAAIA,GAAMC,EAAOD,EAAGE,EAAGC,EAAO,KAAK,MAAMA,EAAQ,EAAE,CAAC,CAAC,CACpE,CAAA,EAJKD,CAAA,CAMR,EAEH,OAEIsB,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAJ,EAAAA,IAACC,EAAS,IAAT,CAAa,UAAWC,EAAQ,MAAQ,GAAGV,EAAQ,EAAA,MAAO,CAAE,EAAAb,CAC3D,EAAA,SAAAqB,EAAA,IAACC,EAAS,IAAT,CACC,UAAWC,EAAQ,IACnB,MAAO,CAAE,UAAWvB,EAAE,GAAGD,CAAI,CAAE,EAC/B,QAAQ,YAER,SAACsB,EAAA,IAAA,OAAA,CAAK,KAAK,eAAe,EAAG5B,EAAM,CAAA,CAAA,EAEvC,QAEC,KAAG,CAAA,UAAW8B,EAAQ,KAAM,IAAAd,EAC1B,aACH,CACF,CAAA,CAAA,CAEJ,ECxFMiB,EAAQ,CACZ,MAAO,gBACP,UAAWC,EACX,WAAY,CAACC,EAAkB,CAC7B,MAAO,MACR,CAAA,EAAGC,CAAe,CACrB,EAGarB,EAAe,CAAC,QAC7BA,EAAM,WAAa,CACjB,GAAGA,EAAM,WACT,YAAa,CACX,OAAQ,KACR,IAAGsB,EAAAtB,EAAM,aAAN,YAAAsB,EAAkB,WACvB,CACF"}