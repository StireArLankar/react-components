{"version":3,"file":"_.story-439638f7.js","sources":["../../src/components/spring/CubicBezier/index.tsx","../../src/components/spring/CubicBezier/_.story.tsx"],"sourcesContent":["import { memo } from 'react'\r\n\r\nimport { animated, to, useSpring, SpringValue } from '@react-spring/web'\r\nimport { useDrag } from '@use-gesture/react'\r\n\r\nimport * as classes from './_classes.css'\r\n\r\ntype Tuple<T> = [T, T]\r\n\r\nconst trans = (...args: [number, number]) =>\r\n  `translate(${args[0]}px, ${args[1]}px)`\r\n\r\nconst t = (val: number) => val.toFixed(0)\r\nconst tt = (val: number) => val.toFixed(2)\r\n\r\nconst boundsInner = { bottom: 500, left: 0, right: 500, top: 0 }\r\nconst boundOuter = { bottom: 590, left: -90, right: 590, top: -90 }\r\n\r\nexport default memo(() => {\r\n  const [{ p1, p2, p3, p4 }, spring] = useSpring(() => ({\r\n    p1: [0, 500] as Tuple<number>,\r\n    p2: [100, 400] as Tuple<number>,\r\n    p3: [400, 100] as Tuple<number>,\r\n    p4: [500, 0] as Tuple<number>,\r\n  }))\r\n\r\n  const bind1 = useDrag(({ offset }) => spring.start({ p1: offset }), {\r\n    from: () => p1.get(),\r\n    bounds: boundsInner,\r\n  })\r\n\r\n  const bind2 = useDrag(({ offset }) => spring.start({ p2: offset }), {\r\n    from: () => p2.get(),\r\n    bounds: boundOuter,\r\n  })\r\n\r\n  const bind3 = useDrag(({ offset }) => spring.start({ p3: offset }), {\r\n    from: () => p3.get(),\r\n    bounds: boundOuter,\r\n  })\r\n\r\n  const bind4 = useDrag(({ offset }) => spring.start({ p4: offset }), {\r\n    from: () => p4.get(),\r\n    bounds: boundsInner,\r\n  })\r\n\r\n  // const classes = useStyles()\r\n\r\n  const renderPoint = (xy: SpringValue<Tuple<number>>, bind: typeof bind1) => (\r\n    <animated.circle\r\n      cx={0}\r\n      cy={0}\r\n      r={10}\r\n      className={classes.circle}\r\n      style={{ transform: xy.to(trans) }}\r\n      stroke='none'\r\n      fill='red'\r\n      {...bind()}\r\n    />\r\n  )\r\n\r\n  return (\r\n    <div className={classes.wrapper}>\r\n      <animated.div className={classes.content}>\r\n        <animated.div>\r\n          {to(\r\n            [p1, p2, p3, p4],\r\n            (p1, p2, p3, p4) =>\r\n              `M${t(p1[0])},${t(p1[1])} C${t(p2[0])},${t(p2[1])} ${t(\r\n                p3[0]\r\n              )},${t(p3[1])} ${t(p4[0])},${t(p4[1])}`\r\n          )}\r\n        </animated.div>\r\n        <animated.div>\r\n          {to([p1, p2, p3, p4], (p1, p2, p3, p4) => {\r\n            const x1 = t(p1[0])\r\n            const y1 = t(p1[1])\r\n            const x4 = t(p4[0])\r\n            const y4 = t(p4[1])\r\n\r\n            if (x1 === '0' && y1 === '500' && x4 === '500' && y4 === '0') {\r\n              return `(${tt(p2[0] / 500)}, ${tt(1 - p2[1] / 500)}, ${tt(\r\n                p3[0] / 500\r\n              )}, ${tt(1 - p3[1] / 500)})`\r\n            }\r\n\r\n            return ``\r\n          })}\r\n        </animated.div>\r\n      </animated.div>\r\n\r\n      <svg viewBox='-100 -100 700 700' className={classes.svg} fill='none'>\r\n        <animated.path\r\n          stroke='blue'\r\n          strokeWidth='1'\r\n          d={to([p1, p2], (a, b) => `M${a[0]},${a[1]} L${b[0]},${b[1]}`)}\r\n        />\r\n        <animated.path\r\n          stroke='blue'\r\n          strokeWidth='1'\r\n          d={to([p3, p4], (a, b) => `M${a[0]},${a[1]} L${b[0]},${b[1]}`)}\r\n        />\r\n        <animated.path\r\n          stroke='black'\r\n          strokeWidth='1'\r\n          d={to(\r\n            [p1, p2, p3, p4],\r\n            (p1, p2, p3, p4) =>\r\n              `M${p1[0]},${p1[1]} C${p2[0]},${p2[1]} ${p3[0]},${p3[1]} ${p4[0]},${p4[1]}`\r\n          )}\r\n        />\r\n        {renderPoint(p1, bind1)}\r\n        {renderPoint(p2, bind2)}\r\n        {renderPoint(p3, bind3)}\r\n        {renderPoint(p4, bind4)}\r\n      </svg>\r\n    </div>\r\n  )\r\n})\r\n","import { withCenteredStyle } from '~/_storybook/withCenteredStyle';\nimport { withCustomTheme } from '~/_storybook/withCustomTheme';\nimport Component from '.';\nexport default {\n  title: 'Spring/Cubic Bezier',\n  decorators: [withCustomTheme, withCenteredStyle({\n    width: '100%'\n  })]\n};\nexport const CubicBezier = () => <Component />;\nCubicBezier.parameters = {\n  ...CubicBezier.parameters,\n  storySource: {\n    source: \"() => <Component />\",\n    ...CubicBezier.parameters?.storySource\n  }\n};"],"names":["trans","args","t","val","tt","boundsInner","boundOuter","memo","p1","p2","p3","p4","spring","useSpring","bind1","useDrag","offset","bind2","bind3","bind4","renderPoint","xy","bind","jsx","animated","classes.circle","jsxs","classes.wrapper","classes.content","to","p12","p22","p32","p42","x1","y1","x4","y4","classes.svg","a","b","__story","withCustomTheme","withCenteredStyle","CubicBezier","Component"],"mappings":"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"}