import{j as r,w as W}from"./withCustomTheme-ab58be2d.js";import{w as $}from"./withCenteredStyle-93f62c3f.js";import{r as f,R as K}from"./index-f1f749bf.js";import{u as U}from"./useBgColor-6afa340b.js";import"./story.css-e50b5b1c.js";import"./_commonjsHelpers-042e6b4d.js";const y=t=>{const{radius:e,stroke:s,progress:n,onRingClick:o,children:u}=t,a=f.useRef(null),g=i=>{if(i.keyCode===38||i.keyCode===39){const c=n<=95?n+5:100;o(c)}if(i.keyCode===37||i.keyCode===40){const c=n>=5?n-5:0;o(c)}},v=i=>{i.preventDefault();const c=a.current;if(!c)return;const{offsetTop:O,offsetLeft:z,offsetWidth:A,offsetHeight:H}=c,P=O+H/2,V=z+A/2,w=o;I(i),document.addEventListener("mousemove",q),document.addEventListener("mouseup",S);function S(d){document.removeEventListener("mousemove",q),document.removeEventListener("mouseup",S),I(d)}function q(d){const{clientX:h,clientY:x}=d,k=h-V,R=-x+P,l=Math.atan2(k,R)*50/Math.PI,j=Math.ceil(l<0?l+100:l);w(j)}function I(d){const{clientX:h,clientY:x}=d,k=h-V,R=-x+P,l=Math.atan2(k,R)*50/Math.PI,j=Math.ceil(l<0?l+100:l);w(j)}},X=i=>{i.stopPropagation();const c=n>50?0:100;o(c)},Y={width:2*e*.99,height:2*e*.99},G={width:2*(e-s)*1.05,height:2*(e-s)*1.05};return r.jsxs("div",{className:"circle-bar__container",onMouseDown:v,onKeyDown:g,ref:a,style:Y,tabIndex:0,children:[r.jsx(N,{radius:e,stroke:s,progress:n}),r.jsx("div",{className:"circle-bar__inner",style:G,onMouseDown:X,children:u})]})},N=t=>{const{radius:e,stroke:s,progress:n}=t,[o,u]=f.useMemo(()=>{const g=e-s/2;return[g*2*Math.PI,g]},[e,s]),a=o-n/100*o;return r.jsxs("svg",{className:"circle-bar__svg",height:e*2,width:e*2,children:[r.jsxs("linearGradient",{id:"gradient1",children:[r.jsx("stop",{id:"stop1",offset:"0%",stopColor:"black",stopOpacity:"1"}),r.jsx("stop",{id:"stop2",offset:"100%",stopColor:"green"})]}),r.jsx("linearGradient",{id:"gradient2",x1:"0",x2:"0",y1:"0",y2:"1",xlinkHref:"#gradient1"}),r.jsx("circle",{stroke:"url(#gradient1)",fill:"transparent",strokeWidth:s,strokeDasharray:o+" "+o,style:{strokeDashoffset:a},r:u,cx:e,cy:e})]})};try{y.displayName="Ring",y.__docgenInfo={description:"",displayName:"Ring",props:{radius:{defaultValue:null,description:"",name:"radius",required:!0,type:{name:"number"}},stroke:{defaultValue:null,description:"",name:"stroke",required:!0,type:{name:"number"}},progress:{defaultValue:null,description:"",name:"progress",required:!0,type:{name:"number"}},onRingClick:{defaultValue:null,description:"",name:"onRingClick",required:!0,type:{name:"(arg: number) => void"}}}}}catch{}try{N.displayName="ProgressRing",N.__docgenInfo={description:"",displayName:"ProgressRing",props:{radius:{defaultValue:null,description:"",name:"radius",required:!0,type:{name:"number"}},stroke:{defaultValue:null,description:"",name:"stroke",required:!0,type:{name:"number"}},progress:{defaultValue:null,description:"",name:"progress",required:!0,type:{name:"number"}},onRingClick:{defaultValue:null,description:"",name:"onRingClick",required:!0,type:{name:"(arg: number) => void"}}}}}catch{}const b=t=>{const{kee:e}=t,s=f.useContext(L),{charDict:n,numDict:o}=s,u=n[e]||o[e];return r.jsxs("ul",{className:"result__slider list",style:{transform:`translateY(-${u*80}px)`},children:[Object.keys(o).map(a=>r.jsx("li",{className:"result__slide result__slide--num",children:a},a)),Object.keys(n).map(a=>r.jsx("li",{className:"result__slide result__slide--char",children:a},a))]})};try{b.displayName="Slider",b.__docgenInfo={description:"",displayName:"Slider",props:{kee:{defaultValue:null,description:"",name:"kee",required:!0,type:{name:"string"}}}}}catch{}const M=t=>{const{array:e}=t;return r.jsx("ul",{className:"result list",children:e.map((s,n)=>r.jsx("li",{className:"result__item",children:r.jsx(b,{kee:s})},n))})};try{M.displayName="Presenter",M.__docgenInfo={description:"",displayName:"Presenter",props:{array:{defaultValue:null,description:"",name:"array",required:!0,type:{name:"string[]"}}}}}catch{}const F={A:11,X:12,M:13," ":14,I:15,N:16},J={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,"%":10},B={charDict:F,numDict:J},L=K.createContext(B),_=t=>{const{progress:e}=t,s=e<=0?["M","I","N"]:e>=100?["M","A","X"]:e.toString().split("");for(;s.length<3;)s.unshift(" ");return s[0]==="M"?s.push(" "):s.push("%"),r.jsx(L.Provider,{value:B,children:r.jsx(M,{array:s})})};try{_.displayName="Result",_.__docgenInfo={description:"",displayName:"Result",props:{progress:{defaultValue:null,description:"",name:"progress",required:!0,type:{name:"number"}}}}}catch{}const Q=()=>{const[t,e]=f.useState(100);U(223,211,251);const s=n=>e(n);return r.jsx("div",{className:"circle-bar",children:r.jsx(y,{radius:200,stroke:30,progress:t,onRingClick:s,children:r.jsx(_,{progress:t})})})},ie={title:"Native/Circle Bar",decorators:[$({width:500}),W]},C=()=>r.jsx(Q,{}),Z=t=>r.jsx(_,{...t}),p=Z.bind({});p.args={progress:0};p.argTypes={progress:{control:{type:"range",min:-10,max:110,step:1}}};const ee=t=>r.jsx(y,{...t}),m=ee.bind({});m.args={progress:0,radius:200,stroke:30};m.argTypes={onRingClick:{action:"onRingClick"}};var D;C.parameters={...C.parameters,storySource:{source:"() => <CircleBar />",...(D=C.parameters)==null?void 0:D.storySource}};var E;p.parameters={...p.parameters,storySource:{source:"props => <Result {...props} />",...(E=p.parameters)==null?void 0:E.storySource}};var T;m.parameters={...m.parameters,storySource:{source:"props => <Ring {...props} />",...(T=m.parameters)==null?void 0:T.storySource}};export{C as _CircleBar,p as _Result,m as _Ring,ie as default};
//# sourceMappingURL=_.story-a493d2f3.js.map
