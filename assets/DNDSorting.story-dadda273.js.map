{"version":3,"file":"DNDSorting.story-dadda273.js","sources":["../../src/components/native/DNDSorting/hamburger.svg","../../src/components/native/DNDSorting/index.tsx","../../src/components/native/DNDSorting/DNDSorting.story.tsx"],"sourcesContent":["export default \"__VITE_ASSET__e45c43a1__\"","import React, { useState, useRef, DragEvent } from 'react'\r\n\r\nimport useBGColor from '~/hook/useBgColor'\r\n\r\nimport style from './dnd.module.scss'\r\nimport { ReactComponent as Hamburger } from './hamburger.svg'\r\n\r\nconst initialItems = ['🍰 Cake', '🍩 Donut', '🍎 Apple', '🍕 Pizza']\r\n\r\nexport const DnDSorting = () => {\r\n  const [items, setItems] = useState(initialItems)\r\n  useBGColor(220, 208, 233)\r\n  const draggedItem = useRef<string | null>(null)\r\n\r\n  const onDragStart = (index: number) => (evt: DragEvent<HTMLDivElement>) => {\r\n    draggedItem.current = items[index]\r\n\r\n    if (evt.dataTransfer) {\r\n      const parent = (evt.target as any).parentNode\r\n      evt.dataTransfer.effectAllowed = 'move'\r\n      evt.dataTransfer.setData('text/html', parent)\r\n      evt.dataTransfer.setDragImage(parent, 50, 50)\r\n    }\r\n  }\r\n\r\n  const onDragOver = (index: number) => () => {\r\n    const draggedOverItem = items[index]\r\n    if (draggedItem.current === draggedOverItem) {\r\n      return\r\n    }\r\n\r\n    const arr = items.filter((item) => item !== draggedItem.current)\r\n\r\n    const newItems = [\r\n      ...arr.slice(0, index),\r\n      draggedItem.current as string,\r\n      ...arr.slice(index),\r\n    ]\r\n\r\n    setItems(newItems)\r\n  }\r\n\r\n  const onDragEnd = () => {\r\n    draggedItem.current = null\r\n  }\r\n\r\n  const renderItems = () =>\r\n    items.map((item, index) => (\r\n      <li key={item} className={style.item} onDragOver={onDragOver(index)}>\r\n        <div\r\n          className={style.handler}\r\n          draggable\r\n          onDragStart={onDragStart(index)}\r\n          onDragEnd={onDragEnd}\r\n        >\r\n          <Hamburger className={style.svg} />\r\n        </div>\r\n        <span className={style.content}>{item}</span>\r\n      </li>\r\n    ))\r\n\r\n  return (\r\n    <div className={style.wrapper}>\r\n      <div className={style.content}>\r\n        <h3>List of items</h3>\r\n        <ul className={style.list}>{renderItems()}</ul>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default DnDSorting\r\n","import React from 'react';\nimport { withCenteredStyle } from '~/_storybook/withCenteredStyle';\nimport { withCustomTheme } from '~/_storybook/withCustomTheme';\nimport { DnDSorting } from '.';\nexport default {\n  title: 'Native/DND Sorting',\n  decorators: [withCenteredStyle({\n    width: '100%',\n    padding: 20\n  }), withCustomTheme]\n};\nexport const Example = () => <DnDSorting />;\nExample.parameters = {\n  ...Example.parameters,\n  storySource: {\n    source: \"() => <DnDSorting />\",\n    ...Example.parameters?.storySource\n  }\n};"],"names":["SvgHamburger","props","React.createElement","initialItems","DnDSorting","items","setItems","useState","useBGColor","draggedItem","useRef","onDragStart","index","evt","parent","onDragOver","draggedOverItem","arr","item","newItems","onDragEnd","renderItems","jsxs","style","jsx","Hamburger","DNDSorting_story","withCenteredStyle","withCustomTheme","Example","_a"],"mappings":"8bACMA,EAAgBC,GAA0BC,EAAmB,cAAC,MAAO,CAAE,cAAe,OAAQ,cAAe,MAAO,YAAa,OAAQ,UAAW,iCAAkC,KAAM,MAAO,MAAO,6BAA8B,QAAS,cAAe,GAAGD,CAAK,EAAoBC,EAAAA,cAAoB,OAAQ,CAAE,KAAM,eAAgB,EAAG,uVAAyV,CAAA,CAAC,ECM7qBC,EAAe,CAAC,UAAW,WAAY,WAAY,UAAU,EAEtDC,EAAa,IAAM,CAC9B,KAAM,CAACC,EAAOC,CAAQ,EAAIC,WAASJ,CAAY,EACpCK,EAAA,IAAK,IAAK,GAAG,EAClB,MAAAC,EAAcC,SAAsB,IAAI,EAExCC,EAAeC,GAAmBC,GAAmC,CAGzE,GAFYJ,EAAA,QAAUJ,EAAMO,CAAK,EAE7BC,EAAI,aAAc,CACd,MAAAC,EAAUD,EAAI,OAAe,WACnCA,EAAI,aAAa,cAAgB,OAC7BA,EAAA,aAAa,QAAQ,YAAaC,CAAM,EAC5CD,EAAI,aAAa,aAAaC,EAAQ,GAAI,EAAE,CAC9C,CAAA,EAGIC,EAAcH,GAAkB,IAAM,CACpC,MAAAI,EAAkBX,EAAMO,CAAK,EAC/B,GAAAH,EAAY,UAAYO,EAC1B,OAGF,MAAMC,EAAMZ,EAAM,OAAQa,GAASA,IAAST,EAAY,OAAO,EAEzDU,EAAW,CACf,GAAGF,EAAI,MAAM,EAAGL,CAAK,EACrBH,EAAY,QACZ,GAAGQ,EAAI,MAAML,CAAK,CAAA,EAGpBN,EAASa,CAAQ,CAAA,EAGbC,EAAY,IAAM,CACtBX,EAAY,QAAU,IAAA,EAGlBY,EAAc,IAClBhB,EAAM,IAAI,CAACa,EAAMN,IACdU,OAAA,KAAA,CAAc,UAAWC,EAAM,KAAM,WAAYR,EAAWH,CAAK,EAChE,SAAA,CAAAY,EAAA,IAAC,MAAA,CACC,UAAWD,EAAM,QACjB,UAAS,GACT,YAAaZ,EAAYC,CAAK,EAC9B,UAAAQ,EAEA,SAACI,EAAA,IAAAC,EAAA,CAAU,UAAWF,EAAM,IAAK,CAAA,CACnC,EACCC,EAAA,IAAA,OAAA,CAAK,UAAWD,EAAM,QAAU,SAAKL,EAAA,CAAA,CAAA,EAT/BA,CAUT,CACD,EAGD,OAAAM,EAAA,IAAC,OAAI,UAAWD,EAAM,QACpB,SAACD,EAAA,KAAA,MAAA,CAAI,UAAWC,EAAM,QACpB,SAAA,CAAAC,EAAAA,IAAC,MAAG,SAAa,eAAA,CAAA,QAChB,KAAG,CAAA,UAAWD,EAAM,KAAO,aAAc,CAAA,CAC5C,CAAA,CACF,CAAA,CAEJ,ECjEeG,EAAA,CACb,MAAO,qBACP,WAAY,CAACC,EAAkB,CAC7B,MAAO,OACP,QAAS,EACV,CAAA,EAAGC,CAAe,CACrB,EACaC,EAAU,IAAML,EAAAA,IAACpB,EAAW,EAAA,QACzCyB,EAAQ,WAAa,CACnB,GAAGA,EAAQ,WACX,YAAa,CACX,OAAQ,uBACR,IAAGC,EAAAD,EAAQ,aAAR,YAAAC,EAAoB,WACzB,CACF"}