{"version":3,"file":"_.story-430775db.js","sources":["../../src/components/spring/Letters/Jump.tsx","../../src/components/spring/Letters/Roll.tsx","../../src/components/spring/Letters/_.story.tsx"],"sourcesContent":["import { useMemo } from 'react'\r\n\r\nimport type { SpringToFn } from '@react-spring/web'\r\nimport { animated, config, useSprings, useTrail } from '@react-spring/web'\r\n\r\nimport classes from './_classes.css'\r\n\r\nexport interface JumpProps {\r\n  children: string\r\n}\r\n\r\nconst trans = (y: number) => `translateY(${y * 50}px)`\r\n\r\nconst asyncTo: SpringToFn<{ y: number }> = async (next) => {\r\n  while (1) {\r\n    await next({ y: 0 })\r\n    await next({ y: 1 })\r\n  }\r\n}\r\n\r\nexport const Jump = (props: JumpProps) => {\r\n  const { children } = props\r\n\r\n  const chars = useMemo(() => children.split(''), [children])\r\n\r\n  // intends to stack chars together\r\n  const springs = useSprings(\r\n    chars.length,\r\n    chars.map((_, index) => ({\r\n      from: { y: 1 },\r\n      to: asyncTo,\r\n      clamp: true,\r\n      config: {\r\n        mass: (index + 1) * 1,\r\n        friction: 20 + index * 3,\r\n      },\r\n    }))\r\n  )\r\n\r\n  const trails = useTrail(chars.length, {\r\n    from: { y: 1 },\r\n    to: asyncTo,\r\n    config: config.stiff,\r\n  })\r\n\r\n  const [trails2] = useTrail(chars.length, (i) => ({\r\n    from: { y: 1 },\r\n    to: asyncTo,\r\n    config: () => ({ mass: 10 + i * 0.1, tension: 200 }),\r\n  }))\r\n\r\n  const [springs2, set2] = useSprings(children.length, (i) => ({\r\n    config: {\r\n      mass: (i + 1) * 1,\r\n      friction: 20 + i * 3,\r\n    },\r\n    from: { y: 0 },\r\n    to: { y: 1 },\r\n    onRest: (result) => {\r\n      if (i === 0) {\r\n        setTimeout(() =>\r\n          set2.start({ to: { y: result.value.y === 0 ? 1 : 0 } })\r\n        )\r\n      }\r\n    },\r\n  }))\r\n\r\n  const [springs3] = useSprings(children.length, (i) => ({\r\n    from: { y: 0 },\r\n    to: asyncTo,\r\n    delay: (i + 1) * 100 + 500,\r\n    config: { clamp: true, tension: 200, mass: 20 },\r\n  }))\r\n\r\n  const renderArr = (arr: typeof springs3) =>\r\n    arr.map((props, index) => (\r\n      <animated.span\r\n        key={index}\r\n        className={classes.char}\r\n        style={{ transform: props.y.to(trans) }}\r\n      >\r\n        {chars[index]}\r\n      </animated.span>\r\n    ))\r\n\r\n  return (\r\n    <>\r\n      <div className={classes.text}>{renderArr(trails)}</div>\r\n      <div className={classes.text}>{renderArr(trails2)}</div>\r\n      <div className={classes.text}>{renderArr(springs)}</div>\r\n      <div className={classes.text}>{renderArr(springs2)}</div>\r\n      <div className={classes.text}>{renderArr(springs3)}</div>\r\n    </>\r\n  )\r\n}\r\n","import { useEffect, useMemo, useState } from 'react'\r\n\r\nimport { animated, config, useTrail } from '@react-spring/web'\r\n\r\nimport classes from './_classes.css'\r\n\r\nexport interface JumpProps {\r\n  children: string\r\n}\r\n\r\nconst trans = (y: number) => `translateX(${y * 200}px) rotate(${y * 360}deg)`\r\n\r\nexport const Roll = (props: JumpProps) => {\r\n  const { children } = props\r\n\r\n  const [flag, setFlag] = useState(false)\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => setFlag((prev) => !prev), 1000)\r\n    return () => clearTimeout(timer)\r\n  }, [flag])\r\n\r\n  const chars = useMemo(() => children.split(''), [children])\r\n\r\n  const trails = useTrail(children.length, {\r\n    from: { x: 1 },\r\n    to: { x: 0 },\r\n    reverse: flag,\r\n    config: config.stiff,\r\n  })\r\n\r\n  const renderLetters = () =>\r\n    trails.map((props, index) => (\r\n      <animated.span\r\n        key={index}\r\n        className={classes.char}\r\n        style={{ transform: props.x.to(trans) }}\r\n      >\r\n        {chars[index]}\r\n      </animated.span>\r\n    ))\r\n\r\n  return <div className={classes.text}>{renderLetters()}</div>\r\n}\r\n","import { withCenteredStyle } from '~/_storybook/withCenteredStyle';\nimport { withCustomTheme } from '~/_storybook/withCustomTheme';\nimport { Jump } from './Jump';\nimport { Roll } from './Roll';\nexport default {\n  title: 'Spring/Letters',\n  decorators: [withCustomTheme, withCenteredStyle({\n    width: '100vw',\n    flexDirection: 'row',\n    alignItems: 'center',\n    minHeight: '100vh',\n    justifyContent: 'space-around'\n  })]\n};\nexport const _Jump = () => <Jump>Hello world</Jump>;\nexport const _Roll = () => <Roll>Hello world</Roll>;\n_Jump.parameters = {\n  ..._Jump.parameters,\n  storySource: {\n    source: \"() => <Jump>Hello world</Jump>\",\n    ..._Jump.parameters?.storySource\n  }\n};\n_Roll.parameters = {\n  ..._Roll.parameters,\n  storySource: {\n    source: \"() => <Roll>Hello world</Roll>\",\n    ..._Roll.parameters?.storySource\n  }\n};"],"names":["trans","y","asyncTo","next","Jump","props","children","chars","useMemo","springs","useSprings","_","index","trails","useTrail","config","trails2","i","springs2","set2","result","springs3","renderArr","arr","props2","jsx","animated","classes","jsxs","Fragment","Roll","flag","setFlag","useState","useEffect","timer","prev","renderLetters","__story","withCustomTheme","withCenteredStyle","_Jump","_Roll","_a"],"mappings":"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"}