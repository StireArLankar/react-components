{"version":3,"file":"_.story-3ead9316.js","sources":["../../src/components/native/SliderOne/Button.tsx","../../src/components/native/SliderOne/ImgSlide.tsx","../../src/components/native/SliderOne/utils.ts","../../src/components/native/SliderOne/Slider.tsx","../../src/components/native/SliderOne/index.tsx","../../src/components/native/SliderOne/_.story.tsx"],"sourcesContent":["import React, { ButtonHTMLAttributes } from 'react'\r\n\r\nimport classes from './slider.module.scss'\r\n\r\nexport interface ButtonProps extends ButtonHTMLAttributes<HTMLButtonElement> {}\r\n\r\nexport const Button = (props: ButtonProps) => {\r\n  const { children, ...rest } = props\r\n\r\n  return (\r\n    <button type='button' {...rest} className={classes.button}>\r\n      {children}\r\n    </button>\r\n  )\r\n}\r\n","import React, { Fragment } from 'react'\r\n\r\nimport style from './slider.module.scss'\r\n\r\nexport interface ImgSlideProps {\r\n  url: string\r\n  text: string\r\n}\r\n\r\nexport const ImgSlide = (props: ImgSlideProps) => {\r\n  return (\r\n    <Fragment>\r\n      <div className={style.imgWrapper}>\r\n        <img src={props.url} alt='' className={style.img} />\r\n      </div>\r\n      <p className={style.text}>{props.text}</p>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default ImgSlide\r\n","const incElement = (elementValue: number, componentsLength: number) => {\r\n  const maxValue = componentsLength - 1\r\n  return elementValue === maxValue ? 0 : elementValue + 1\r\n}\r\n\r\nconst decElement = (elementValue: number, componentsLength: number) => {\r\n  const maxValue = componentsLength - 1\r\n  return elementValue === 0 ? maxValue : elementValue - 1\r\n}\r\n\r\nconst findIndexOfFirstElement = (\r\n  array: number[],\r\n  componentsLength: number,\r\n  listLength: number\r\n): number => {\r\n  const max = Math.max(...array)\r\n  const min = Math.min(...array)\r\n  const diff = max - min\r\n  const listDiff = listLength - 1 // 3\r\n  if (diff !== listDiff) {\r\n    const indexOfMin = array.indexOf(min)\r\n    let list = [...array]\r\n    list.splice(indexOfMin, 1, min + componentsLength)\r\n    return findIndexOfFirstElement(list, componentsLength, listLength)\r\n  }\r\n  return array.indexOf(max)\r\n}\r\n\r\nconst findIndexOfLastElement = (\r\n  array: number[],\r\n  componentsLength: number,\r\n  listLength: number\r\n): number => {\r\n  const max = Math.max(...array)\r\n  const min = Math.min(...array)\r\n  const diff = max - min\r\n  const listDiff = listLength - 1 // 3\r\n  if (diff !== listDiff) {\r\n    const indexOfMin = array.indexOf(min)\r\n    let list = [...array]\r\n    list.splice(indexOfMin, 1, min + componentsLength)\r\n    return findIndexOfLastElement(list, componentsLength, listLength)\r\n  }\r\n  return array.indexOf(min)\r\n}\r\n\r\nexport const incLastElement = (\r\n  array: number[],\r\n  componentsLength: number,\r\n  listLength: number\r\n): number[] => {\r\n  // ищем минимальный индекс в массиве\r\n  const indexOfLast = findIndexOfLastElement(\r\n    array,\r\n    componentsLength,\r\n    listLength\r\n  )\r\n  // ищем максимальный индекс в массиве\r\n  const indexOfFirst = findIndexOfFirstElement(\r\n    array,\r\n    componentsLength,\r\n    listLength\r\n  )\r\n  // ищем 'максимальное значение'\r\n  const increasedElement = incElement(array[indexOfFirst], componentsLength)\r\n  // возвращаем массив, у которого на месте минимального индекса стоит максимальный\r\n  let temp = [...array]\r\n  temp.splice(indexOfLast, 1, increasedElement)\r\n  return temp\r\n}\r\n\r\nexport const decFirstElement = (\r\n  array: number[],\r\n  componentsLength: number,\r\n  listLength: number\r\n): number[] => {\r\n  const indexOfLast = findIndexOfLastElement(\r\n    array,\r\n    componentsLength,\r\n    listLength\r\n  )\r\n  const indexOfFirst = findIndexOfFirstElement(\r\n    array,\r\n    componentsLength,\r\n    listLength\r\n  )\r\n  const decreasedElement = decElement(array[indexOfLast], componentsLength)\r\n  let temp = [...array]\r\n  temp.splice(indexOfFirst, 1, decreasedElement)\r\n  return temp\r\n}\r\n","import React, { useEffect, useRef, Fragment } from 'react'\r\n\r\nimport clsx from 'clsx'\r\n\r\nimport style from './slider.module.scss'\r\nimport { incLastElement, decFirstElement } from './utils'\r\n\r\ninterface SliderProps {\r\n  components: JSX.Element[]\r\n  onComplete: () => void\r\n  index: number\r\n}\r\n\r\nconst Slider = (props: SliderProps) => {\r\n  const { components, onComplete, index } = props\r\n  const temp = useRef(0)\r\n  const listRef = useRef([components.length - 1, 0, 1, 2])\r\n  const list = listRef.current\r\n\r\n  const onTransitionEnd = () => onComplete()\r\n\r\n  useEffect(() => {\r\n    const len = components.length\r\n\r\n    const newList =\r\n      index > temp.current\r\n        ? incLastElement(listRef.current, len, listRef.current.length)\r\n        : decFirstElement(listRef.current, len, listRef.current.length)\r\n\r\n    listRef.current = newList\r\n    temp.current = index\r\n  }, [index, components.length])\r\n\r\n  const renderSlides = () => {\r\n    const array = list.map((index) => components[index])\r\n    return array.map((el, index) => (\r\n      <li key={list[index]} className={clsx(style.box, style[`box--${index}`])}>\r\n        {el}\r\n      </li>\r\n    ))\r\n  }\r\n\r\n  return (\r\n    <Fragment>\r\n      <div className={style.stage}>\r\n        <ul\r\n          className={style.spinner}\r\n          style={{ transform: `translateZ(-150px) rotateY(${-90 * index}deg)` }}\r\n          onTransitionEnd={onTransitionEnd}\r\n        >\r\n          {renderSlides()}\r\n        </ul>\r\n      </div>\r\n    </Fragment>\r\n  )\r\n}\r\n\r\nexport default Slider\r\n","import React, { useState } from 'react'\r\n\r\nimport useBGColor from '~/hook/useBgColor'\r\n\r\nimport { Button } from './Button'\r\nimport ImgSlide from './ImgSlide'\r\nimport Slider from './Slider'\r\nimport classes from './slider.module.scss'\r\n\r\nconst url = `https://stirearlankar.github.io/54729-kekstagram/photos/1.jpg`\r\nconst numbers = [1, 2, 3, 4, 5, 6, 7]\r\nconst reg = /\\/1\\./g\r\nconst urls = numbers.map((num) => url.replace(reg, `/${num}.`))\r\nconst array = urls.map((url, index) => (\r\n  <ImgSlide url={url} text={String(index + 1)} />\r\n))\r\n\r\nexport const SliderOne = () => {\r\n  const [index, setIndex] = useState(0)\r\n  const [isReady, setIsReady] = useState(true)\r\n\r\n  useBGColor(251, 219, 211)\r\n\r\n  const updateIndexBy = (number: number) => () => {\r\n    if (!isReady) {\r\n      return\r\n    }\r\n    setIndex(index + number)\r\n    setIsReady(false)\r\n  }\r\n\r\n  const increaseIndex = updateIndexBy(1)\r\n  const decreaseIndex = updateIndexBy(-1)\r\n\r\n  const beReady = () => setIsReady(true)\r\n\r\n  return (\r\n    <div className={classes.wrapper}>\r\n      <Button onClick={decreaseIndex}>Backward</Button>\r\n\r\n      <div className={classes.stageWrapper}>\r\n        <Slider index={index} components={array} onComplete={beReady} />\r\n      </div>\r\n\r\n      <Button onClick={increaseIndex}>Forward</Button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SliderOne\r\n","import { ComponentStory } from '@storybook/react';\nimport { withCenteredStyle } from '~/_storybook/withCenteredStyle';\nimport { withCustomTheme } from '~/_storybook/withCustomTheme';\nimport { Button } from './Button';\nimport Slider from '.';\nexport default {\n  title: 'Native/SliderOne',\n  decorators: [withCenteredStyle({\n    width: 'auto',\n    backgroundColor: 'var(--)'\n  }), withCustomTheme]\n};\nexport const _Slider = () => <Slider />;\ntype Props = {\n  children: string;\n};\nconst Asd = (props: Props) => <Button {...props} />;\nconst Template: ComponentStory<typeof Asd> = props => <Asd {...props} />;\nexport const _Button = Template.bind({});\n_Button.args = {\n  children: 'Inner text'\n};\n_Slider.parameters = {\n  ..._Slider.parameters,\n  storySource: {\n    source: \"() => <Slider />\",\n    ..._Slider.parameters?.storySource\n  }\n};\n_Button.parameters = {\n  ..._Button.parameters,\n  storySource: {\n    source: \"props => <Asd {...props} />\",\n    ..._Button.parameters?.storySource\n  }\n};"],"names":["Button","props","children","rest","jsx","classes","ImgSlide","jsxs","Fragment","style","incElement","elementValue","componentsLength","maxValue","decElement","findIndexOfFirstElement","array","listLength","max","min","diff","listDiff","indexOfMin","list","findIndexOfLastElement","incLastElement","indexOfLast","indexOfFirst","increasedElement","temp","decFirstElement","decreasedElement","Slider","components","onComplete","index","useRef","listRef","onTransitionEnd","useEffect","len","newList","renderSlides","index2","el","clsx","url","numbers","reg","urls","num","SliderOne","setIndex","useState","isReady","setIsReady","useBGColor","updateIndexBy","number","increaseIndex","decreaseIndex","beReady","__story","withCenteredStyle","withCustomTheme","_Slider","Asd","Template","_Button","_a"],"mappings":"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"}